<UserControl x:Class="Magitek.Controls.GambitsControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:actions="clr-namespace:Magitek.Gambits.Actions"
             xmlns:conditions="clr-namespace:Magitek.Gambits.Conditions"
             xmlns:controls="clr-namespace:Magitek.Controls"
             xmlns:converters="clr-namespace:Magitek.Converters"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:enums="clr-namespace:ff14bot.Enums;assembly=RebornBuddy"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
             xmlns:viewModels="clr-namespace:Magitek.ViewModels"
             d:DesignHeight="450"
             d:DesignWidth="670"
             FontSize="11"
             mc:Ignorable="d">

    <UserControl.Resources>
        <ResourceDictionary>
            <ObjectDataProvider x:Key="GambitActionTypes" MethodName="GetValues" ObjectType="{x:Type sys:Enum}">
                <ObjectDataProvider.MethodParameters>
                    <x:Type TypeName="actions:GambitActionTypes" />
                </ObjectDataProvider.MethodParameters>
            </ObjectDataProvider>

            <converters:EnumDescriptionConverter x:Key="EnumDescriptionConverter" />
            <converters:ConditionRemoveConverter x:Key="ConditionConverter" />
            <converters:ConditionAddConverter x:Key="ConditionAddConverter" />
            <BooleanToVisibilityConverter x:Key="BoolToVis" />

        </ResourceDictionary>
    </UserControl.Resources>

    <UserControl.DataContext>
        <Binding Source="{x:Static viewModels:GambitsViewModel.Instance}" />
    </UserControl.DataContext>

    <Border Padding="5" Background="{DynamicResource ClassSelectorBackground}">
        <StackPanel>

            <Grid Margin="10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <Button Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.AddGambitGroup}" Content="Add New Gambit Group" Style="{DynamicResource ButtonLists}" />

                <Button Grid.Column="1"
                        Margin="5,0"
                        Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.RecoverOldGambitsCommand}"
                        Content="Recover Old Gambits"
                        Style="{DynamicResource ButtonLists}"
                        Visibility="{Binding CanRecoverOldGambits, Converter={StaticResource BoolToVis}}" />

                <Button Grid.Column="2" Margin="10,0,0,0" Command="{Binding ShowGambitsBrowserModal}" Content="Open Shared Gambits Browser" Style="{DynamicResource ButtonLists}" />
                <TextBlock Grid.Column="3" Margin="10,0,0,0" VerticalAlignment="Center" Foreground="{DynamicResource Light}" Text="{Binding Status, Mode=OneWay}" />
                <Button Grid.Column="4" Margin="0,0,4,0" HorizontalAlignment="Right" Command="{Binding ApplyGambitsCommand}" Style="{DynamicResource ButtonApply}" />
                <Button Grid.Column="5" Margin="0,0,5,0" HorizontalAlignment="Right" Command="{Binding Save}" Style="{DynamicResource ButtonSave}" />

            </Grid>

            <TextBlock FontSize="11" Foreground="White" Text="{Binding TestStatus, Mode=OneWay}" />

            <Grid Margin="10">
                <StackPanel Orientation="Horizontal">
                    <RadioButton Name="Astrologian" Command="{Binding JobSelectionChanged}" CommandParameter="{Binding ElementName=Astrologian, Path=Name}" GroupName="JobFilter" Style="{DynamicResource RadioButtonAstrologian}" />
                    <RadioButton Name="Scholar" Command="{Binding JobSelectionChanged}" CommandParameter="{Binding ElementName=Scholar, Path=Name}" GroupName="JobFilter" Style="{DynamicResource RadioButtonScholar}" />
                    <RadioButton Name="WhiteMage" Command="{Binding JobSelectionChanged}" CommandParameter="{Binding ElementName=WhiteMage, Path=Name}" GroupName="JobFilter" Style="{DynamicResource RadioButtonWhiteMage}" />

                    <RadioButton Name="Paladin" Command="{Binding JobSelectionChanged}" CommandParameter="{Binding ElementName=Paladin, Path=Name}" GroupName="JobFilter" Style="{DynamicResource RadioButtonPaladin}" />
                    <RadioButton Name="Warrior" Command="{Binding JobSelectionChanged}" CommandParameter="{Binding ElementName=Warrior, Path=Name}" GroupName="JobFilter" Style="{DynamicResource RadioButtonWarrior}" />
                    <RadioButton Name="DarkKnight" Command="{Binding JobSelectionChanged}" CommandParameter="{Binding ElementName=DarkKnight, Path=Name}" GroupName="JobFilter" Style="{DynamicResource RadioButtonDarkknight}" />
                    <RadioButton Name="Gunbreaker" Command="{Binding JobSelectionChanged}" CommandParameter="{Binding ElementName=Gunbreaker, Path=Name}" GroupName="JobFilter" Style="{DynamicResource RadioButtonGunbreaker}" />

                    <RadioButton Name="Bard" Command="{Binding JobSelectionChanged}" CommandParameter="{Binding ElementName=Bard, Path=Name}" GroupName="JobFilter" Style="{DynamicResource RadioButtonBard}" />
                    <RadioButton Name="Machinist" Command="{Binding JobSelectionChanged}" CommandParameter="{Binding ElementName=Machinist, Path=Name}" GroupName="JobFilter" Style="{DynamicResource RadioButtonMachinist}" />
                    <RadioButton Name="Dancer" Command="{Binding JobSelectionChanged}" CommandParameter="{Binding ElementName=Dancer, Path=Name}" GroupName="JobFilter" Style="{DynamicResource RadioButtonDancer}" />

                    <RadioButton Name="Summoner" Command="{Binding JobSelectionChanged}" CommandParameter="{Binding ElementName=Summoner, Path=Name}" GroupName="JobFilter" Style="{DynamicResource RadioButtonSummoner}" />
                    <RadioButton Name="BlackMage" Command="{Binding JobSelectionChanged}" CommandParameter="{Binding ElementName=BlackMage, Path=Name}" GroupName="JobFilter" Style="{DynamicResource RadioButtonBlackMage}" />
                    <RadioButton Name="RedMage" Command="{Binding JobSelectionChanged}" CommandParameter="{Binding ElementName=RedMage, Path=Name}" GroupName="JobFilter" Style="{DynamicResource RadioButtonRedMage}" />

                    <RadioButton Name="Monk" Command="{Binding JobSelectionChanged}" CommandParameter="{Binding ElementName=Monk, Path=Name}" GroupName="JobFilter" Style="{DynamicResource RadioButtonMonk}" />
                    <RadioButton Name="Ninja" Command="{Binding JobSelectionChanged}" CommandParameter="{Binding ElementName=Ninja, Path=Name}" GroupName="JobFilter" Style="{DynamicResource RadioButtonNinja}" />
                    <RadioButton Name="Dragoon" Command="{Binding JobSelectionChanged}" CommandParameter="{Binding ElementName=Dragoon, Path=Name}" GroupName="JobFilter" Style="{DynamicResource RadioButtonDragoon}" />
                    <RadioButton Name="Samurai" Command="{Binding JobSelectionChanged}" CommandParameter="{Binding ElementName=Samurai, Path=Name}" GroupName="JobFilter" Style="{DynamicResource RadioButtonSamurai}" />
                </StackPanel>

                <ToggleButton HorizontalAlignment="Right" Command="{Binding ResetJobGambitGroupsCommand}" Content="Current Zone" IsChecked="{Binding OnlyCurrentZone, Mode=TwoWay}" Style="{DynamicResource ToggleButtonGambitFilter}" />
            </Grid>

            <Rectangle Height="1" Margin="5,3,15,0" HorizontalAlignment="Stretch" Fill="DimGray" Opacity="0.05" />

            <ScrollViewer Height="350" MaxHeight="350" VerticalScrollBarVisibility="Visible">

                <ItemsControl ItemsSource="{Binding CollectionViewSource}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>

                            <!--  Gambit Group Expander  -->
                            <Expander Margin="5,11,0,0" Foreground="White" IsExpanded="True">
                                <Expander.Style>
                                    <Style TargetType="{x:Type Expander}">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="{x:Type Expander}">

                                                    <StackPanel>
                                                        <Grid>
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="30" />
                                                                <ColumnDefinition Width="Auto" />
                                                                <ColumnDefinition Width="Auto" />
                                                                <ColumnDefinition Width="Auto" />
                                                                <ColumnDefinition Width="Auto" />
                                                                <ColumnDefinition Width="Auto" />
                                                                <ColumnDefinition />
                                                                <ColumnDefinition Width="Auto" />
                                                                <ColumnDefinition Width="Auto" />
                                                            </Grid.ColumnDefinitions>

                                                            <ToggleButton x:Name="ExpanderButton"
                                                                          Grid.Column="0"
                                                                          HorizontalAlignment="Center"
                                                                          VerticalAlignment="Center"
                                                                          ClickMode="Press"
                                                                          Focusable="True"
                                                                          IsChecked="{Binding Path=IsExpanded, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                                                                          OverridesDefaultStyle="True"
                                                                          Template="{DynamicResource ToggleButtonGambitGroup}" />

                                                            <Rectangle Grid.Column="1" Width="2" VerticalAlignment="Stretch" Fill="Black" Opacity="0.10" />

                                                            <TextBox Grid.Column="2"
                                                                     VerticalAlignment="Top"
                                                                     CaretBrush="White"
                                                                     FontSize="11"
                                                                     Foreground="{DynamicResource Light}"
                                                                     Tag="GROUP NAME:"
                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTitleTextBox}"
                                                                     Text="{Binding Name, Mode=TwoWay}" />

                                                            <ComboBox Grid.Column="3" Margin="10,0,10,1" HorizontalAlignment="Right">
                                                                <ComboBox.Style>
                                                                    <Style TargetType="{x:Type ComboBox}">
                                                                        <Setter Property="SnapsToDevicePixels" Value="True" />
                                                                        <Setter Property="OverridesDefaultStyle" Value="True" />
                                                                        <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto" />
                                                                        <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto" />
                                                                        <Setter Property="ScrollViewer.CanContentScroll" Value="True" />
                                                                        <Setter Property="TextElement.FontWeight" Value="SemiBold" />
                                                                        <Setter Property="TextElement.Foreground" Value="{DynamicResource MainForeground}" />
                                                                        <Setter Property="FocusVisualStyle" Value="{x:Null}" />
                                                                        <Setter Property="Template">
                                                                            <Setter.Value>
                                                                                <ControlTemplate TargetType="ComboBox">
                                                                                    <Border Name="Background"
                                                                                            Width="20"
                                                                                            Height="20"
                                                                                            Background="{DynamicResource AccentDarker}"
                                                                                            CornerRadius="5"
                                                                                            IsHitTestVisible="True">

                                                                                        <Grid>

                                                                                            <CheckBox Name="ToggleButton" ClickMode="Press" Focusable="False" IsChecked="{Binding Path=IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" Template="{DynamicResource ComboBoxGambitActionToggleButton}" />

                                                                                            <Path Width="12"
                                                                                                  HorizontalAlignment="Center"
                                                                                                  VerticalAlignment="Center"
                                                                                                  Data="M19.376008,10.343977L21.671012,12.642004 18.228005,13.791017z M5,4.9990206L22.99,4.9990206 20.993,6.9990206 5,6.9990206C3.3460007,6.9990206,2,8.3450208,2,9.9990206L2,19.999022C2,21.653021,3.3460007,22.999022,5,22.999022L7,22.999022C7.552,22.999022,8,23.44602,8,23.999022L8,28.795021 14.341,23.246021C14.524,23.087021,14.758,22.999022,15,22.999022L27,22.999022C28.654,22.999022,30,21.653021,30,19.999022L30,9.9990206C30,8.9230208,29.426001,7.9860206,28.574,7.4560208L30.002,6.026021C31.208,6.9400206,32,8.3730206,32,9.9990206L32,19.999022C32,22.756021,29.757,24.999022,27,24.999022L15.376,24.999022 7.6590004,31.75202C7.4730005,31.914021 7.2379999,31.999022 7,31.999022 6.8600006,31.999022 6.7189999,31.97002 6.5869999,31.909021 6.2290001,31.747021 6,31.39102 6,30.999022L6,24.999022 5,24.999022C2.243,24.999022,0,22.756021,0,19.999022L0,9.9990206C0,7.2420206,2.243,4.9990207,5,4.9990206z M26.262019,3.4479895L28.55801,5.7459612 22.819025,11.49199 20.52401,9.1939569z M29.704995,0L31.999997,2.2990074 29.704995,4.5970154 27.409993,2.2990074z"
                                                                                                  Fill="White"
                                                                                                  IsHitTestVisible="False"
                                                                                                  Stretch="Uniform" />

                                                                                            <Popup Name="Popup"
                                                                                                   AllowsTransparency="True"
                                                                                                   Focusable="False"
                                                                                                   IsOpen="{TemplateBinding ComboBox.IsDropDownOpen}"
                                                                                                   Placement="Bottom"
                                                                                                   PopupAnimation="Slide"
                                                                                                   VerticalOffset="5">

                                                                                                <Grid Name="DropDown" MinWidth="{TemplateBinding FrameworkElement.ActualWidth}" MaxHeight="{TemplateBinding ComboBox.MaxDropDownHeight}" SnapsToDevicePixels="True">
                                                                                                    <Border Name="DropDownBorder" Background="{DynamicResource AccentLighter}" CornerRadius="7" />

                                                                                                    <ScrollViewer Margin="4" SnapsToDevicePixels="True">
                                                                                                        <ItemsPresenter KeyboardNavigation.DirectionalNavigation="Contained" />
                                                                                                    </ScrollViewer>
                                                                                                </Grid>
                                                                                            </Popup>

                                                                                        </Grid>
                                                                                    </Border>
                                                                                    <ControlTemplate.Triggers>
                                                                                        <Trigger Property="Tag" Value="Yes">
                                                                                            <Setter TargetName="Background" Property="Background" Value="{DynamicResource Info}" />
                                                                                        </Trigger>
                                                                                        <Trigger Property="ItemsControl.HasItems" Value="False">
                                                                                            <Setter TargetName="DropDownBorder" Property="FrameworkElement.MinHeight" Value="95" />
                                                                                        </Trigger>
                                                                                        <Trigger Property="UIElement.IsEnabled" Value="False">
                                                                                            <Setter Property="TextElement.Foreground" Value="Gray" />
                                                                                        </Trigger>
                                                                                        <Trigger Property="IsDropDownOpen" Value="True">
                                                                                            <Setter TargetName="Background" Property="Background" Value="{DynamicResource Info}" />
                                                                                        </Trigger>
                                                                                        <Trigger Property="ItemsControl.IsGrouping" Value="True">
                                                                                            <Setter Property="ScrollViewer.CanContentScroll" Value="False" />
                                                                                        </Trigger>
                                                                                        <Trigger Property="ComboBox.IsEditable" Value="True">
                                                                                            <Setter Property="KeyboardNavigation.IsTabStop" Value="False" />
                                                                                        </Trigger>
                                                                                    </ControlTemplate.Triggers>
                                                                                </ControlTemplate>
                                                                            </Setter.Value>
                                                                        </Setter>
                                                                    </Style>
                                                                </ComboBox.Style>

                                                                <StackPanel Width="300" Margin="3">
                                                                    <TextBox HorizontalAlignment="Center"
                                                                             AcceptsReturn="True"
                                                                             CaretBrush="White"
                                                                             FontSize="10"
                                                                             Foreground="{DynamicResource Light}"
                                                                             Tag="DESCRIPTION:"
                                                                             Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                             Text="{Binding Description, Mode=TwoWay}"
                                                                             TextWrapping="Wrap" />
                                                                </StackPanel>
                                                            </ComboBox>

                                                            <TextBox Grid.Column="4"
                                                                     VerticalAlignment="Top"
                                                                     CaretBrush="White"
                                                                     FontSize="11"
                                                                     Foreground="{DynamicResource Light}"
                                                                     Tag="ZONE ID:"
                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTitleTextBox}"
                                                                     Text="{Binding ZoneId, Mode=TwoWay}" />

                                                            <TextBox Grid.Column="5"
                                                                     VerticalAlignment="Top"
                                                                     CaretBrush="White"
                                                                     FontSize="11"
                                                                     Foreground="{DynamicResource Light}"
                                                                     Tag="ZONE NAME:"
                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTitleTextBox}"
                                                                     Text="{Binding ZoneName, Mode=TwoWay}" />

                                                            <Button Grid.Column="6"
                                                                    Margin="5,0,0,1"
                                                                    HorizontalAlignment="Right"
                                                                    Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.SetGambitGroupCurrentZone}"
                                                                    CommandParameter="{Binding}"
                                                                    Style="{DynamicResource ButtonGambitSetZone}"
                                                                    ToolTip="Set Group To Current Zone"
                                                                    Visibility="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Expander}}, Path=IsExpanded, Converter={StaticResource BoolToVis}}" />

                                                            <Button Grid.Column="7"
                                                                    Margin="5,0,0,1"
                                                                    HorizontalAlignment="Right"
                                                                    Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.AddGambit}"
                                                                    CommandParameter="{Binding}"
                                                                    Style="{DynamicResource ButtonAdd}"
                                                                    ToolTip="Add Gambit"
                                                                    Visibility="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Expander}}, Path=IsExpanded, Converter={StaticResource BoolToVis}}" />


                                                            <ComboBox Grid.Column="8" Margin="5,0,0,1" HorizontalAlignment="Right" Style="{DynamicResource ComboBoxGambitAdditionalSettings}">
                                                                <StackPanel Margin="3">

                                                                    <!--  Paste Copied Gambit  -->
                                                                    <Button HorizontalAlignment="Left" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.PasteCopiedGambit}" CommandParameter="{Binding}" Content="PASTE COPIED GAMBIT" Style="{DynamicResource ButtonGambitAddCondition}" />

                                                                    <!--  Copy Gambit Group  -->
                                                                    <Button HorizontalAlignment="Left" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.CopyGambitGroup}" CommandParameter="{Binding}" Content="COPY GAMBIT GROUP" Style="{DynamicResource ButtonGambitAddCondition}" />

                                                                    <!--  Paste Copied Gambit Group  -->
                                                                    <Button HorizontalAlignment="Left" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.PasteCopiedGambitGroup}" CommandParameter="{Binding}" Content="PASTE COPIED GAMBIT GROUP" Style="{DynamicResource ButtonGambitAddCondition}" />

                                                                    <!--  Shared Gambit Group  -->
                                                                    <Button HorizontalAlignment="Left" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.ShareGambitGroup}" CommandParameter="{Binding}" Content="SHARE" Style="{DynamicResource ButtonGambitAddCondition}" />

                                                                    <!--  Remove Gambit Group  -->
                                                                    <Button Margin="0,10,0,0"
                                                                            HorizontalAlignment="Left"
                                                                            Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.RemoveGambitGroup}"
                                                                            CommandParameter="{Binding}"
                                                                            Content="DELETE GAMBIT GROUP"
                                                                            Style="{DynamicResource ButtonGambitAddCondition}" />

                                                                </StackPanel>
                                                            </ComboBox>
                                                        </Grid>

                                                        <ItemsControl x:Name="ExpanderContent" ItemsSource="{Binding Gambits}" Visibility="Collapsed">

                                                            <ItemsControl.ItemTemplate>
                                                                <DataTemplate>

                                                                    <!--  Gambit Blocks  -->

                                                                    <!--
                                                                        I think the goal is to be able to edit everything through two-way binding
                                                                        so we don't have to set a 'selected gambit' object
                                                                    -->

                                                                    <Grid Margin="2,6,2,6">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="100" />
                                                                            <ColumnDefinition Width="Auto" />
                                                                            <ColumnDefinition Width="38" />
                                                                            <ColumnDefinition Width="Auto" />
                                                                            <ColumnDefinition />
                                                                            <ColumnDefinition Width="Auto" />
                                                                            <ColumnDefinition Width="Auto" />
                                                                        </Grid.ColumnDefinitions>
                                                                        <Grid.RowDefinitions>
                                                                            <RowDefinition Height="0" />
                                                                            <RowDefinition />
                                                                            <RowDefinition />
                                                                        </Grid.RowDefinitions>

                                                                        <!--  Name  -->
                                                                        <TextBox Grid.Row="1"
                                                                                 Grid.Column="0"
                                                                                 CaretBrush="White"
                                                                                 Foreground="{DynamicResource GrayDark}"
                                                                                 Template="{DynamicResource TextBoxTemplateGambit}"
                                                                                 Text="{Binding Title, Mode=TwoWay}" />

                                                                        <!--  Action Type  -->
                                                                        <ComboBox Name="GambitActionType"
                                                                                  Grid.Row="1"
                                                                                  Grid.Column="1"
                                                                                  Margin="5,0,2,0"
                                                                                  HorizontalAlignment="Center"
                                                                                  FontSize="9"
                                                                                  ItemsSource="{Binding Source={StaticResource GambitActionTypes}}"
                                                                                  SelectedValue="{Binding Path=ActionType, Mode=OneWay}"
                                                                                  SelectionChanged="GambitActionType_OnSelectionChanged"
                                                                                  Style="{DynamicResource ComboBoxGambitAction}">

                                                                            <ComboBox.ItemTemplate>
                                                                                <DataTemplate>
                                                                                    <ContentPresenter HorizontalAlignment="Center" Content="{Binding Converter={StaticResource EnumDescriptionConverter}}" />
                                                                                </DataTemplate>
                                                                            </ComboBox.ItemTemplate>
                                                                            <ComboBox.ItemContainerStyle>
                                                                                <Style TargetType="{x:Type ComboBoxItem}">
                                                                                    <Setter Property="Template">
                                                                                        <Setter.Value>
                                                                                            <ControlTemplate TargetType="{x:Type ComboBoxItem}">
                                                                                                <ContentPresenter Name="Content" HorizontalAlignment="Center" />

                                                                                                <ControlTemplate.Triggers>
                                                                                                    <Trigger Property="IsMouseOver" Value="True">
                                                                                                        <Setter TargetName="Content" Property="TextBlock.Foreground" Value="{DynamicResource Info}" />
                                                                                                    </Trigger>
                                                                                                </ControlTemplate.Triggers>
                                                                                            </ControlTemplate>
                                                                                        </Setter.Value>
                                                                                    </Setter>
                                                                                </Style>
                                                                            </ComboBox.ItemContainerStyle>

                                                                        </ComboBox>

                                                                        <!--  Gambit Action Settings Button  -->
                                                                        <ComboBox Grid.Row="1" Grid.Column="2" Margin="3,0,2,0" HorizontalAlignment="Center">
                                                                            <ComboBox.Style>
                                                                                <Style TargetType="{x:Type ComboBox}">

                                                                                    <Style.Triggers>
                                                                                        <DataTrigger Binding="{Binding ElementName=GambitActionType, Path=SelectedIndex}" Value="0">
                                                                                            <Setter Property="Visibility" Value="Collapsed" />
                                                                                        </DataTrigger>
                                                                                    </Style.Triggers>

                                                                                    <Setter Property="SnapsToDevicePixels" Value="True" />
                                                                                    <Setter Property="OverridesDefaultStyle" Value="True" />
                                                                                    <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto" />
                                                                                    <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto" />
                                                                                    <Setter Property="ScrollViewer.CanContentScroll" Value="True" />
                                                                                    <Setter Property="TextElement.FontWeight" Value="SemiBold" />
                                                                                    <Setter Property="TextElement.Foreground" Value="{DynamicResource MainForeground}" />
                                                                                    <Setter Property="FocusVisualStyle" Value="{x:Null}" />
                                                                                    <Setter Property="Template">
                                                                                        <Setter.Value>
                                                                                            <ControlTemplate TargetType="ComboBox">
                                                                                                <Border Name="Background"
                                                                                                        Width="30"
                                                                                                        Height="20"
                                                                                                        Background="{DynamicResource AccentLighter}"
                                                                                                        CornerRadius="7"
                                                                                                        IsHitTestVisible="True">
                                                                                                    <Grid>

                                                                                                        <CheckBox Name="ToggleButton" ClickMode="Press" Focusable="False" IsChecked="{Binding Path=IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" Template="{DynamicResource ComboBoxGambitActionToggleButton}" />

                                                                                                        <Path Width="12"
                                                                                                              HorizontalAlignment="Center"
                                                                                                              VerticalAlignment="Center"
                                                                                                              Data="M16.099976,9.3999939C12.299988,9.3999939 9.2000122,12.299988 9.2000122,16 9.2000122,19.699982 12.200012,22.600006 16,22.699982 19.799988,22.699982 22.899963,19.799988 22.899963,16.100006 23,12.399994 19.899963,9.3999939 16.099976,9.3999939z M16.200012,0C17.599976,0,19,0.19998169,20.299988,0.6000061L20.799988,4.1000061C22.099976,4.6000061,23.399963,5.2999878,24.5,6.1999817L27.899963,4.8999939C29.799988,6.7999878,31.299988,9.1999817,32,11.899994L29.200012,14C29.299988,14.699982 29.399963,15.299988 29.399963,16 29.399963,16.699982 29.299988,17.399994 29.200012,18L32,20.199982C31.200012,22.799988,29.799988,25.199982,27.799988,27.100006L24.399963,26C23.299988,26.899994,22.099976,27.5,20.700012,28L20.099976,31.5C18.799988,31.799988 17.399963,32 15.899963,32 14.5,32 13.099976,31.799988 11.700012,31.399994L11.200012,27.899994C9.8999634,27.399994,8.5999756,26.699982,7.5,25.799988L4.0999756,27.100006C2.2000122,25.199982,0.70001221,22.799988,0,20.100006L3,18C2.8999634,17.299988 2.7999878,16.699982 2.7999878,16 2.7999878,15.299988 2.8999634,14.600006 3,14L0.20001221,11.799988C1,9.1000061,2.3999634,6.7999878,4.3999634,4.8999939L7.7999878,6C8.8999634,5.1000061,10.099976,4.5,11.5,4L12.099976,0.5C13.399963,0.19998169,14.799988,0,16.200012,0z"
                                                                                                              Fill="White"
                                                                                                              IsHitTestVisible="False"
                                                                                                              Stretch="Uniform" />

                                                                                                        <Popup Name="Popup"
                                                                                                               AllowsTransparency="True"
                                                                                                               Focusable="False"
                                                                                                               IsOpen="{TemplateBinding ComboBox.IsDropDownOpen}"
                                                                                                               Placement="Bottom"
                                                                                                               PopupAnimation="Slide"
                                                                                                               VerticalOffset="5">

                                                                                                            <Grid Name="DropDown" MinWidth="{TemplateBinding FrameworkElement.ActualWidth}" MaxHeight="{TemplateBinding ComboBox.MaxDropDownHeight}" SnapsToDevicePixels="True">
                                                                                                                <Border Name="DropDownBorder" Background="{DynamicResource AccentLighter}" CornerRadius="7" />

                                                                                                                <ScrollViewer Margin="4" SnapsToDevicePixels="True">
                                                                                                                    <ItemsPresenter KeyboardNavigation.DirectionalNavigation="Contained" />
                                                                                                                </ScrollViewer>
                                                                                                            </Grid>
                                                                                                        </Popup>

                                                                                                    </Grid>
                                                                                                </Border>
                                                                                                <ControlTemplate.Triggers>
                                                                                                    <Trigger Property="ItemsControl.HasItems" Value="False">
                                                                                                        <Setter TargetName="DropDownBorder" Property="FrameworkElement.MinHeight" Value="95" />
                                                                                                    </Trigger>
                                                                                                    <Trigger Property="UIElement.IsEnabled" Value="False">
                                                                                                        <Setter Property="TextElement.Foreground" Value="Gray" />
                                                                                                    </Trigger>
                                                                                                    <Trigger Property="ItemsControl.IsGrouping" Value="True">
                                                                                                        <Setter Property="ScrollViewer.CanContentScroll" Value="False" />
                                                                                                    </Trigger>
                                                                                                    <Trigger Property="ComboBox.IsEditable" Value="True">
                                                                                                        <Setter Property="KeyboardNavigation.IsTabStop" Value="False" />
                                                                                                    </Trigger>
                                                                                                    <Trigger Property="IsDropDownOpen" Value="True">
                                                                                                        <Setter TargetName="Background" Property="Background" Value="{DynamicResource Info}" />
                                                                                                    </Trigger>
                                                                                                </ControlTemplate.Triggers>
                                                                                            </ControlTemplate>
                                                                                        </Setter.Value>
                                                                                    </Setter>
                                                                                </Style>
                                                                            </ComboBox.Style>

                                                                            <StackPanel Width="250">

                                                                                <!--  Gambit Action Type Options  -->
                                                                                <ContentPresenter Content="{Binding Action}">
                                                                                    <ContentPresenter.Resources>

                                                                                        <DataTemplate DataType="{x:Type actions:PetCastAction}">
                                                                                            <StackPanel Margin="3">
                                                                                                <TextBox CaretBrush="White"
                                                                                                         FontSize="10"
                                                                                                         Foreground="{DynamicResource Light}"
                                                                                                         Tag="SPELL NAME:"
                                                                                                         Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                         Text="{Binding SpellName, Mode=TwoWay}" />
                                                                                                <StackPanel Margin="0,4,0,0" Orientation="Horizontal">
                                                                                                    <RadioButton Content="On Target" GroupName="PetCast" IsChecked="{Binding OnTarget, Mode=TwoWay}" Style="{DynamicResource RadioButtonGambitCondition}" />
                                                                                                    <RadioButton Margin="4,0" Content="On Pet" GroupName="PetCast" IsChecked="{Binding OnPet, Mode=TwoWay}" Style="{DynamicResource RadioButtonGambitCondition}" />
                                                                                                    <RadioButton Content="On Player" GroupName="PetCast" IsChecked="{Binding OnPlayer, Mode=TwoWay}" Style="{DynamicResource RadioButtonGambitCondition}" />
                                                                                                </StackPanel>
                                                                                            </StackPanel>
                                                                                        </DataTemplate>

                                                                                        <DataTemplate DataType="{x:Type actions:UseItemOnSelfAction}">
                                                                                            <StackPanel Margin="3">
                                                                                                <TextBox CaretBrush="White"
                                                                                                         FontSize="10"
                                                                                                         Foreground="{DynamicResource Light}"
                                                                                                         Tag="ITEM NAME:"
                                                                                                         Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                         Text="{Binding ItemName, Mode=TwoWay}" />

                                                                                                <StackPanel Margin="0,4,0,0" Orientation="Horizontal">
                                                                                                    <RadioButton Content="Any Quality" GroupName="ItemType" IsChecked="{Binding AnyQuality, Mode=TwoWay}" Style="{DynamicResource RadioButtonGambitCondition}" />
                                                                                                    <RadioButton Margin="4,0" Content="High Quality" GroupName="ItemType" IsChecked="{Binding HighQualityOnly, Mode=TwoWay}" Style="{DynamicResource RadioButtonGambitCondition}" />
                                                                                                    <RadioButton Content="Normal Quality" GroupName="ItemType" IsChecked="{Binding NormalQualityOnly, Mode=TwoWay}" Style="{DynamicResource RadioButtonGambitCondition}" />
                                                                                                </StackPanel>
                                                                                            </StackPanel>
                                                                                        </DataTemplate>

                                                                                        <DataTemplate DataType="{x:Type actions:CastSpellOnCurrentTargetAction}">
                                                                                            <StackPanel Margin="3">
                                                                                                <TextBox CaretBrush="White"
                                                                                                         FontSize="10"
                                                                                                         Foreground="{DynamicResource Light}"
                                                                                                         Tag="SPELL NAME:"
                                                                                                         Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                         Text="{Binding SpellName, Mode=TwoWay}" />
                                                                                                <CheckBox Margin="3" Content="IS PVP SPELL" IsChecked="{Binding IsPvpSpell, Mode=TwoWay}" Style="{DynamicResource CheckBoxGambits}" />
                                                                                            </StackPanel>
                                                                                        </DataTemplate>

                                                                                        <DataTemplate DataType="{x:Type actions:CastFillerOnCurrentTargetAction}">
                                                                                            <StackPanel Margin="3">
                                                                                                <TextBox CaretBrush="White"
                                                                                                         FontSize="10"
                                                                                                         Foreground="{DynamicResource Light}"
                                                                                                         Tag="FILLER SPELLNAME:"
                                                                                                         Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                         Text="{Binding SpellName, Mode=TwoWay}" />
                                                                                                <TextBox CaretBrush="White"
                                                                                                         FontSize="10"
                                                                                                         Foreground="{DynamicResource Light}"
                                                                                                         Tag="ON PROC SPELLNAME:"
                                                                                                         Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                         Text="{Binding ProcName, Mode=TwoWay}" />
                                                                                                <CheckBox Margin="3" Content="IS PVP SPELL" IsChecked="{Binding IsPvpSpell, Mode=TwoWay}" Style="{DynamicResource CheckBoxGambits}" />
                                                                                            </StackPanel>
                                                                                        </DataTemplate>

                                                                                        <DataTemplate DataType="{x:Type actions:CastSpellOnAllyAction}">
                                                                                            <StackPanel Margin="3">
                                                                                                <TextBox CaretBrush="White"
                                                                                                         FontSize="10"
                                                                                                         Foreground="{DynamicResource Light}"
                                                                                                         Tag="SPELL NAME:"
                                                                                                         Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                         Text="{Binding SpellName, Mode=TwoWay}" />
                                                                                                <CheckBox Margin="3" Content="IS PVP SPELL" IsChecked="{Binding IsPvpSpell, Mode=TwoWay}" Style="{DynamicResource CheckBoxGambits}" />
                                                                                            </StackPanel>
                                                                                        </DataTemplate>

                                                                                        <DataTemplate DataType="{x:Type actions:CastSpellOnEnemyAction}">
                                                                                            <StackPanel Margin="3">
                                                                                                <TextBox CaretBrush="White"
                                                                                                         FontSize="10"
                                                                                                         Foreground="{DynamicResource Light}"
                                                                                                         Tag="SPELL NAME:"
                                                                                                         Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                         Text="{Binding SpellName, Mode=TwoWay}" />
                                                                                                <CheckBox Margin="3" Content="IS PVP SPELL" IsChecked="{Binding IsPvpSpell, Mode=TwoWay}" Style="{DynamicResource CheckBoxGambits}" />
                                                                                            </StackPanel>
                                                                                        </DataTemplate>

                                                                                        <DataTemplate DataType="{x:Type actions:CastSpellOnFriendlyNpcAction}">
                                                                                            <StackPanel Margin="3">
                                                                                                <TextBox CaretBrush="White"
                                                                                                         FontSize="10"
                                                                                                         Foreground="{DynamicResource Light}"
                                                                                                         Tag="SPELL NAME:"
                                                                                                         Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                         Text="{Binding SpellName, Mode=TwoWay}" />
                                                                                                <CheckBox Margin="3" Content="IS PVP SPELL" IsChecked="{Binding IsPvpSpell, Mode=TwoWay}" Style="{DynamicResource CheckBoxGambits}" />
                                                                                            </StackPanel>
                                                                                        </DataTemplate>

                                                                                        <DataTemplate DataType="{x:Type actions:CastSpellOnSelfAction}">
                                                                                            <StackPanel Margin="3">
                                                                                                <TextBox CaretBrush="White"
                                                                                                         FontSize="10"
                                                                                                         Foreground="{DynamicResource Light}"
                                                                                                         Tag="SPELL NAME:"
                                                                                                         Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                         Text="{Binding SpellName, Mode=TwoWay}" />
                                                                                                <CheckBox Margin="3" Content="IS PVP SPELL" IsChecked="{Binding IsPvpSpell, Mode=TwoWay}" Style="{DynamicResource CheckBoxGambits}" />
                                                                                            </StackPanel>
                                                                                        </DataTemplate>

                                                                                        <DataTemplate DataType="{x:Type actions:SleepForTimeAction}">
                                                                                            <StackPanel Orientation="Horizontal">
                                                                                                <TextBox CaretBrush="White"
                                                                                                         FontSize="10"
                                                                                                         Foreground="{DynamicResource Light}"
                                                                                                         Tag="SLEEP FOR (MS):"
                                                                                                         Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                         Text="{Binding DurationInMilliseconds, Mode=TwoWay}" />
                                                                                            </StackPanel>
                                                                                        </DataTemplate>

                                                                                        <DataTemplate DataType="{x:Type actions:ToastMessageAction}">
                                                                                            <StackPanel>
                                                                                                <TextBox CaretBrush="White"
                                                                                                         FontSize="10"
                                                                                                         Foreground="{DynamicResource Light}"
                                                                                                         Tag="MESSSAGE:"
                                                                                                         Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                         Text="{Binding message, Mode=TwoWay}" />
                                                                                                <TextBox CaretBrush="White"
                                                                                                         FontSize="10"
                                                                                                         Foreground="{DynamicResource Light}"
                                                                                                         Tag="DURATION (SECONDS):"
                                                                                                         Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                         Text="{Binding displaySeconds, Mode=TwoWay}" />
                                                                                            </StackPanel>
                                                                                        </DataTemplate>

                                                                                    </ContentPresenter.Resources>
                                                                                </ContentPresenter>

                                                                                <StackPanel Orientation="Horizontal">
                                                                                    <TextBox CaretBrush="White" Foreground="{DynamicResource Light}" Tag="PREVENT FOR NEXT (MS):" Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}" Text="{Binding PreventSameActionForTheNextMilliseconds, Mode=TwoWay}" />
                                                                                </StackPanel>
                                                                            </StackPanel>

                                                                        </ComboBox>

                                                                        <!--  Conditions  -->
                                                                        <ItemsControl Grid.Row="1" Grid.Column="3" Margin="5,0,0,0" ItemsSource="{Binding Conditions}">
                                                                            <ItemsControl.ItemsPanel>
                                                                                <ItemsPanelTemplate>
                                                                                    <!--  Make the items display horizontally  -->
                                                                                    <StackPanel Orientation="Horizontal" />
                                                                                </ItemsPanelTemplate>
                                                                            </ItemsControl.ItemsPanel>

                                                                            <ItemsControl.Resources>
                                                                                <DataTemplate DataType="{x:Type conditions:EnemyCastingSpellCondition}">
                                                                                    <ComboBox Margin="3,0,0,0" Background="{DynamicResource Success}" Style="{DynamicResource ComboBoxGambitCondition}" Tag="ENEMY CASTING">
                                                                                        <StackPanel Width="200" Margin="3">
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="SPELL NAME:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="{Binding SpellName, Mode=TwoWay}" />

                                                                                            <TextBox Margin="0,3,0,0"
                                                                                                     CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="MINIMUM TIME INTO CAST:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="{Binding TimeIntoCast, Mode=TwoWay}" />

                                                                                            <StackPanel Margin="0,4,0,0" Orientation="Horizontal">
                                                                                                <RadioButton Content="On Anyone" GroupName="EnemyCastingSpellTarget" IsChecked="{Binding TargetAnyone, Mode=TwoWay}" Style="{DynamicResource RadioButtonGambitCondition}" />
                                                                                                <RadioButton Margin="4,0" Content="On Spell Target" GroupName="EnemyCastingSpellTarget" IsChecked="{Binding TargetOfSpell, Mode=TwoWay}" Style="{DynamicResource RadioButtonGambitCondition}" />
                                                                                                <RadioButton Content="On Me" GroupName="EnemyCastingSpellTarget" IsChecked="{Binding PlayerTargetOfSpell, Mode=TwoWay}" Style="{DynamicResource RadioButtonGambitCondition}" />
                                                                                            </StackPanel>

                                                                                            <Button Margin="0,3,0,0" HorizontalAlignment="Right" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.RemoveGambitCondition}" Content="REMOVE CONDITION" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                                <Button.CommandParameter>
                                                                                                    <MultiBinding Converter="{StaticResource ConditionConverter}">
                                                                                                        <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}, AncestorLevel=2}" />
                                                                                                        <Binding Path="Id" />
                                                                                                    </MultiBinding>
                                                                                                </Button.CommandParameter>
                                                                                            </Button>
                                                                                        </StackPanel>
                                                                                    </ComboBox>
                                                                                </DataTemplate>

                                                                                <DataTemplate DataType="{x:Type conditions:CombatTimeCondition}">
                                                                                    <ComboBox Margin="3,0,0,0" Background="{DynamicResource Success}" Style="{DynamicResource ComboBoxGambitCondition}" Tag="COMBAT TIME">
                                                                                        <StackPanel Width="200" Margin="3">
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="MINIMUM TIME IN COMBAT:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="{Binding MillisecondsMinimum, Mode=TwoWay}" />

                                                                                            <TextBox Margin="0,3,0,0"
                                                                                                     CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="MAXIMUM TIME IN COMBAT:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="{Binding MillisecondsMaximum, Mode=TwoWay}" />

                                                                                            <Button Margin="0,3,0,0" HorizontalAlignment="Right" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.RemoveGambitCondition}" Content="REMOVE CONDITION" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                                <Button.CommandParameter>
                                                                                                    <MultiBinding Converter="{StaticResource ConditionConverter}">
                                                                                                        <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}, AncestorLevel=2}" />
                                                                                                        <Binding Path="Id" />
                                                                                                    </MultiBinding>
                                                                                                </Button.CommandParameter>
                                                                                            </Button>
                                                                                        </StackPanel>
                                                                                    </ComboBox>
                                                                                </DataTemplate>

                                                                                <DataTemplate DataType="{x:Type conditions:SpellOffCooldownCondition}">
                                                                                    <ComboBox Margin="3,0,0,0" Background="{DynamicResource Success}" Style="{DynamicResource ComboBoxGambitCondition}" Tag="SPELL OFF CD">
                                                                                        <StackPanel Width="200" Margin="3">
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="SPELL NAME:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="{Binding SpellName, Mode=TwoWay}" />

                                                                                            <CheckBox Margin="3" Content="IS PVP SPELL" IsChecked="{Binding IsPvpSpell, Mode=TwoWay}" Style="{DynamicResource CheckBoxGambits}" />

                                                                                            <Button Margin="0,3,0,0" HorizontalAlignment="Right" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.RemoveGambitCondition}" Content="REMOVE CONDITION" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                                <Button.CommandParameter>
                                                                                                    <MultiBinding Converter="{StaticResource ConditionConverter}">
                                                                                                        <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}, AncestorLevel=2}" />
                                                                                                        <Binding Path="Id" />
                                                                                                    </MultiBinding>
                                                                                                </Button.CommandParameter>
                                                                                            </Button>
                                                                                        </StackPanel>
                                                                                    </ComboBox>
                                                                                </DataTemplate>

                                                                                <DataTemplate DataType="{x:Type conditions:LastSpellCondition}">
                                                                                    <ComboBox Margin="3,0,0,0" Background="{DynamicResource Success}" Style="{DynamicResource ComboBoxGambitCondition}" Tag="LAST SPELL">
                                                                                        <StackPanel Width="200" Margin="3">
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="SPELL NAME:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="{Binding SpellName, Mode=TwoWay}" />

                                                                                            <Button Margin="0,3,0,0" HorizontalAlignment="Right" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.RemoveGambitCondition}" Content="REMOVE CONDITION" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                                <Button.CommandParameter>
                                                                                                    <MultiBinding Converter="{StaticResource ConditionConverter}">
                                                                                                        <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}, AncestorLevel=2}" />
                                                                                                        <Binding Path="Id" />
                                                                                                    </MultiBinding>
                                                                                                </Button.CommandParameter>
                                                                                            </Button>
                                                                                        </StackPanel>
                                                                                    </ComboBox>
                                                                                </DataTemplate>

                                                                                <DataTemplate DataType="{x:Type conditions:TargetNameCondition}">
                                                                                    <ComboBox Margin="3,0,0,0" Background="{DynamicResource Success}" Style="{DynamicResource ComboBoxGambitCondition}" Tag="TARGET NAME">
                                                                                        <StackPanel Width="200" Margin="3">
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="TARGET NAME:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="{Binding TargetName, Mode=TwoWay}" />
                                                                                            <Button Margin="0,3,0,0" HorizontalAlignment="Right" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.RemoveGambitCondition}" Content="REMOVE CONDITION" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                                <Button.CommandParameter>
                                                                                                    <MultiBinding Converter="{StaticResource ConditionConverter}">
                                                                                                        <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}, AncestorLevel=2}" />
                                                                                                        <Binding Path="Id" />
                                                                                                    </MultiBinding>
                                                                                                </Button.CommandParameter>
                                                                                            </Button>
                                                                                        </StackPanel>
                                                                                    </ComboBox>
                                                                                </DataTemplate>

                                                                                <DataTemplate DataType="{x:Type conditions:HasPetCondition}">
                                                                                    <ComboBox Margin="3,0,0,0" Background="{DynamicResource Success}" Style="{DynamicResource ComboBoxGambitCondition}" Tag="HAS PET">
                                                                                        <StackPanel>
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="HAS PET:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="True" />
                                                                                            <Button Margin="0,3,0,0" HorizontalAlignment="Right" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.RemoveGambitCondition}" Content="REMOVE CONDITION" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                                <Button.CommandParameter>
                                                                                                    <MultiBinding Converter="{StaticResource ConditionConverter}">
                                                                                                        <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}, AncestorLevel=2}" />
                                                                                                        <Binding Path="Id" />
                                                                                                    </MultiBinding>
                                                                                                </Button.CommandParameter>
                                                                                            </Button>
                                                                                        </StackPanel>
                                                                                    </ComboBox>
                                                                                </DataTemplate>

                                                                                <DataTemplate DataType="{x:Type conditions:HasAuraCondition}">
                                                                                    <ComboBox Margin="3,0,0,0" Background="{DynamicResource Success}" Style="{DynamicResource ComboBoxGambitCondition}" Tag="TARGET HAS AURA">
                                                                                        <StackPanel Width="200">
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="AURA NAME:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="{Binding AuraName, Mode=TwoWay}" />
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="MINIMUM MILLISECONDS LEFT:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="{Binding AuraMillisecondsMinimum, Mode=TwoWay}" />
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="MAXIMUM MILLISECONDS LEFT:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="{Binding AuraMillisecondsMaximum, Mode=TwoWay}" />
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="AMOUNT OF STACKS:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="{Binding AuraStacks, Mode=TwoWay}" />

                                                                                            <CheckBox Margin="3" Content="IS MY AURA" IsChecked="{Binding IsMyAura, Mode=TwoWay}" Style="{DynamicResource CheckBoxGambits}" />
                                                                                            <Button Margin="0,3,0,0" HorizontalAlignment="Right" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.RemoveGambitCondition}" Content="REMOVE CONDITION" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                                <Button.CommandParameter>
                                                                                                    <MultiBinding Converter="{StaticResource ConditionConverter}">
                                                                                                        <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}, AncestorLevel=2}" />
                                                                                                        <Binding Path="Id" />
                                                                                                    </MultiBinding>
                                                                                                </Button.CommandParameter>
                                                                                            </Button>
                                                                                        </StackPanel>
                                                                                    </ComboBox>
                                                                                </DataTemplate>

                                                                                <DataTemplate DataType="{x:Type conditions:PlayerHasAuraCondition}">
                                                                                    <ComboBox Margin="3,0,0,0" Background="{DynamicResource Success}" Style="{DynamicResource ComboBoxGambitCondition}" Tag="PLAYER HAS AURA">
                                                                                        <StackPanel Width="200">
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="AURA NAME:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="{Binding AuraName, Mode=TwoWay}" />
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="MINIMUM MILLISECONDS LEFT:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="{Binding AuraMillisecondsMinimum, Mode=TwoWay}" />
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="MAXIMUM MILLISECONDS LEFT:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="{Binding AuraMillisecondsMaximum, Mode=TwoWay}" />
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="AMOUNT OF STACKS:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="{Binding AuraStacks, Mode=TwoWay}" />

                                                                                            <CheckBox Margin="3" Content="IS MY AURA" IsChecked="{Binding IsMyAura, Mode=TwoWay}" Style="{DynamicResource CheckBoxGambits}" />
                                                                                            <Button Margin="0,3,0,0" HorizontalAlignment="Right" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.RemoveGambitCondition}" Content="REMOVE CONDITION" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                                <Button.CommandParameter>
                                                                                                    <MultiBinding Converter="{StaticResource ConditionConverter}">
                                                                                                        <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}, AncestorLevel=2}" />
                                                                                                        <Binding Path="Id" />
                                                                                                    </MultiBinding>
                                                                                                </Button.CommandParameter>
                                                                                            </Button>
                                                                                        </StackPanel>
                                                                                    </ComboBox>
                                                                                </DataTemplate>

                                                                                <DataTemplate DataType="{x:Type conditions:PlayerDoesNotHaveAuraCondition}">
                                                                                    <ComboBox Margin="3,0,0,0" Background="{DynamicResource Success}" Style="{DynamicResource ComboBoxGambitCondition}" Tag="PLAYER NO AURA">
                                                                                        <StackPanel Width="200">
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="AURA NAME:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="{Binding AuraName, Mode=TwoWay}" />
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="MINIMUM MILLISECONDS LEFT:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="{Binding AuraMillisecondsMinimum, Mode=TwoWay}" />


                                                                                            <CheckBox Margin="3" Content="IS MY AURA" IsChecked="{Binding IsMyAura, Mode=TwoWay}" Style="{DynamicResource CheckBoxGambits}" />
                                                                                            <Button Margin="0,3,0,0" HorizontalAlignment="Right" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.RemoveGambitCondition}" Content="REMOVE CONDITION" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                                <Button.CommandParameter>
                                                                                                    <MultiBinding Converter="{StaticResource ConditionConverter}">
                                                                                                        <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}, AncestorLevel=2}" />
                                                                                                        <Binding Path="Id" />
                                                                                                    </MultiBinding>
                                                                                                </Button.CommandParameter>
                                                                                            </Button>
                                                                                        </StackPanel>
                                                                                    </ComboBox>
                                                                                </DataTemplate>

                                                                                <DataTemplate DataType="{x:Type conditions:DoesNotHaveAuraCondition}">
                                                                                    <ComboBox Margin="3,0,0,0" Background="{DynamicResource Success}" Style="{DynamicResource ComboBoxGambitCondition}" Tag="NO AURA">
                                                                                        <StackPanel Width="200">
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="AURA NAME:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="{Binding AuraName, Mode=TwoWay}" />
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="MINIMUM MILLISECONDS LEFT:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="{Binding AuraMillisecondsMinimum, Mode=TwoWay}" />


                                                                                            <CheckBox Margin="3" Content="IS MY AURA" IsChecked="{Binding IsMyAura, Mode=TwoWay}" Style="{DynamicResource CheckBoxGambits}" />
                                                                                            <Button Margin="0,3,0,0" HorizontalAlignment="Right" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.RemoveGambitCondition}" Content="REMOVE CONDITION" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                                <Button.CommandParameter>
                                                                                                    <MultiBinding Converter="{StaticResource ConditionConverter}">
                                                                                                        <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}, AncestorLevel=2}" />
                                                                                                        <Binding Path="Id" />
                                                                                                    </MultiBinding>
                                                                                                </Button.CommandParameter>
                                                                                            </Button>
                                                                                        </StackPanel>
                                                                                    </ComboBox>
                                                                                </DataTemplate>

                                                                                <DataTemplate DataType="{x:Type conditions:MpPercentCondition}">
                                                                                    <ComboBox Margin="3,0,0,0" Background="{DynamicResource Success}" Style="{DynamicResource ComboBoxGambitCondition}" Tag="MP PERCENT">
                                                                                        <StackPanel Width="200" Margin="3">
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="MANA PERCENT:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="{Binding MPPercentageValue, Mode=TwoWay}" />

                                                                                            <StackPanel Margin="0,4,0,0" Orientation="Horizontal">
                                                                                                <RadioButton Content="Above" GroupName="MPPercentValue" IsChecked="{Binding Above, Mode=TwoWay}" Style="{DynamicResource RadioButtonGambitCondition}" />
                                                                                                <RadioButton Content="Above Or Equal" GroupName="MPPercentValue" IsChecked="{Binding AboveOrEqual, Mode=TwoWay}" Style="{DynamicResource RadioButtonGambitCondition}" />
                                                                                            </StackPanel>
                                                                                            <StackPanel Margin="0,4,0,0" Orientation="Horizontal">
                                                                                                <RadioButton Content="Lower" GroupName="MPPercentValue" IsChecked="{Binding Lower, Mode=TwoWay}" Style="{DynamicResource RadioButtonGambitCondition}" />
                                                                                                <RadioButton Content="Lower Or Equal" GroupName="MPPercentValue" IsChecked="{Binding LowerOrEqual, Mode=TwoWay}" Style="{DynamicResource RadioButtonGambitCondition}" />
                                                                                            </StackPanel>

                                                                                            <Button Margin="0,3,0,0" HorizontalAlignment="Right" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.RemoveGambitCondition}" Content="REMOVE CONDITION" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                                <Button.CommandParameter>
                                                                                                    <MultiBinding Converter="{StaticResource ConditionConverter}">
                                                                                                        <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}, AncestorLevel=2}" />
                                                                                                        <Binding Path="Id" />
                                                                                                    </MultiBinding>
                                                                                                </Button.CommandParameter>
                                                                                            </Button>
                                                                                        </StackPanel>
                                                                                    </ComboBox>
                                                                                </DataTemplate>

                                                                                <DataTemplate DataType="{x:Type conditions:HpPercentBelowCondition}">
                                                                                    <ComboBox Margin="3,0,0,0" Background="{DynamicResource Success}" Style="{DynamicResource ComboBoxGambitCondition}" Tag="HP % BELOW">
                                                                                        <StackPanel>
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="HEALTH PERCENT BELOW:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="{Binding HpPercentage, Mode=TwoWay}" />
                                                                                            <Button Margin="0,3,0,0" HorizontalAlignment="Right" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.RemoveGambitCondition}" Content="REMOVE CONDITION" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                                <Button.CommandParameter>
                                                                                                    <MultiBinding Converter="{StaticResource ConditionConverter}">
                                                                                                        <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}, AncestorLevel=2}" />
                                                                                                        <Binding Path="Id" />
                                                                                                    </MultiBinding>
                                                                                                </Button.CommandParameter>
                                                                                            </Button>
                                                                                        </StackPanel>
                                                                                    </ComboBox>
                                                                                </DataTemplate>

                                                                                <DataTemplate DataType="{x:Type conditions:HpPercentBetweenCondition}">
                                                                                    <ComboBox Margin="3,0,0,0" Background="{DynamicResource Success}" Style="{DynamicResource ComboBoxGambitCondition}" Tag="HP % BETWEEN">
                                                                                        <StackPanel>
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="HEALTH PERCENT MINIMUM:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="{Binding HpPercentMinimum, Mode=TwoWay}" />
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="HEALTH PERCENT MAXIMUM:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="{Binding HpPercentMaximum, Mode=TwoWay}" />
                                                                                            <Button Margin="0,3,0,0" HorizontalAlignment="Right" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.RemoveGambitCondition}" Content="REMOVE CONDITION" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                                <Button.CommandParameter>
                                                                                                    <MultiBinding Converter="{StaticResource ConditionConverter}">
                                                                                                        <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}, AncestorLevel=2}" />
                                                                                                        <Binding Path="Id" />
                                                                                                    </MultiBinding>
                                                                                                </Button.CommandParameter>
                                                                                            </Button>
                                                                                        </StackPanel>
                                                                                    </ComboBox>
                                                                                </DataTemplate>

                                                                                <DataTemplate DataType="{x:Type conditions:InInstanceCondition}">
                                                                                    <ComboBox Margin="3,0,0,0" Background="{DynamicResource Success}" Style="{DynamicResource ComboBoxGambitCondition}" Tag="IN INSTANCE">
                                                                                        <StackPanel>
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="IN INSTANCE:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="True" />
                                                                                            <Button Margin="0,3,0,0" HorizontalAlignment="Right" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.RemoveGambitCondition}" Content="REMOVE CONDITION" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                                <Button.CommandParameter>
                                                                                                    <MultiBinding Converter="{StaticResource ConditionConverter}">
                                                                                                        <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}, AncestorLevel=2}" />
                                                                                                        <Binding Path="Id" />
                                                                                                    </MultiBinding>
                                                                                                </Button.CommandParameter>
                                                                                            </Button>
                                                                                        </StackPanel>
                                                                                    </ComboBox>
                                                                                </DataTemplate>

                                                                                <DataTemplate DataType="{x:Type conditions:NotInInstanceCondition}">
                                                                                    <ComboBox Margin="3,0,0,0" Background="{DynamicResource Success}" Style="{DynamicResource ComboBoxGambitCondition}" Tag="NOT IN INSTANCE">
                                                                                        <StackPanel>
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="NOT IN INSTANCE:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="False" />
                                                                                            <Button Margin="0,3,0,0" HorizontalAlignment="Right" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.RemoveGambitCondition}" Content="REMOVE CONDITION" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                                <Button.CommandParameter>
                                                                                                    <MultiBinding Converter="{StaticResource ConditionConverter}">
                                                                                                        <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}, AncestorLevel=2}" />
                                                                                                        <Binding Path="Id" />
                                                                                                    </MultiBinding>
                                                                                                </Button.CommandParameter>
                                                                                            </Button>
                                                                                        </StackPanel>
                                                                                    </ComboBox>
                                                                                </DataTemplate>

                                                                                <DataTemplate DataType="{x:Type conditions:PlayerInCombatCondition}">
                                                                                    <ComboBox Margin="3,0,0,0" Background="{DynamicResource Success}" Style="{DynamicResource ComboBoxGambitCondition}" Tag="IN COMBAT">
                                                                                        <StackPanel>
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="PLAYER IN COMBAT:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="True" />
                                                                                            <Button Margin="0,3,0,0" HorizontalAlignment="Right" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.RemoveGambitCondition}" Content="REMOVE CONDITION" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                                <Button.CommandParameter>
                                                                                                    <MultiBinding Converter="{StaticResource ConditionConverter}">
                                                                                                        <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}, AncestorLevel=2}" />
                                                                                                        <Binding Path="Id" />
                                                                                                    </MultiBinding>
                                                                                                </Button.CommandParameter>
                                                                                            </Button>
                                                                                        </StackPanel>
                                                                                    </ComboBox>
                                                                                </DataTemplate>

                                                                                <DataTemplate DataType="{x:Type conditions:PlayerNotInCombatCondition}">
                                                                                    <ComboBox Margin="3,0,0,0" Background="{DynamicResource Success}" Style="{DynamicResource ComboBoxGambitCondition}" Tag="NO COMBAT">
                                                                                        <StackPanel>
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="PLAYER NOT IN COMBAT:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="True" />
                                                                                            <Button Margin="0,3,0,0" HorizontalAlignment="Right" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.RemoveGambitCondition}" Content="REMOVE CONDITION" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                                <Button.CommandParameter>
                                                                                                    <MultiBinding Converter="{StaticResource ConditionConverter}">
                                                                                                        <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}, AncestorLevel=2}" />
                                                                                                        <Binding Path="Id" />
                                                                                                    </MultiBinding>
                                                                                                </Button.CommandParameter>
                                                                                            </Button>
                                                                                        </StackPanel>
                                                                                    </ComboBox>
                                                                                </DataTemplate>

                                                                                <DataTemplate DataType="{x:Type conditions:IsJobCondition}">
                                                                                    <ComboBox Margin="3,0,0,0" Background="{DynamicResource Success}" Style="{DynamicResource ComboBoxGambitCondition}" Tag="IS JOB">
                                                                                        <StackPanel>
                                                                                            <StackPanel Orientation="Horizontal">
                                                                                                <StackPanel>
                                                                                                    <CheckBox Margin="3,0,0,0" Content="WHITE MAGE" IsChecked="{Binding IsWhm, Mode=TwoWay}" Style="{DynamicResource CheckBoxGambits}" />
                                                                                                    <CheckBox Margin="3,3" Content="SCHOLAR" IsChecked="{Binding IsSch, Mode=TwoWay}" Style="{DynamicResource CheckBoxGambits}" />
                                                                                                    <CheckBox Margin="3,0,0,0" Content="ASTROLOGIAN" IsChecked="{Binding IsAst, Mode=TwoWay}" Style="{DynamicResource CheckBoxGambits}" />
                                                                                                    <CheckBox Margin="3,3" Content="PALADIN" IsChecked="{Binding IsPld, Mode=TwoWay}" Style="{DynamicResource CheckBoxGambits}" />
                                                                                                    <CheckBox Margin="3,0,0,0" Content="WARRIOR" IsChecked="{Binding IsWar, Mode=TwoWay}" Style="{DynamicResource CheckBoxGambits}" />
                                                                                                    <CheckBox Margin="3,3" Content="DARK KNIGHT" IsChecked="{Binding IsDrk, Mode=TwoWay}" Style="{DynamicResource CheckBoxGambits}" />
                                                                                                    <CheckBox Margin="3,0,0,0" Content="BARD" IsChecked="{Binding IsBrd, Mode=TwoWay}" Style="{DynamicResource CheckBoxGambits}" />
                                                                                                    <CheckBox Margin="3,3" Content="MACHINIST" IsChecked="{Binding IsMch, Mode=TwoWay}" Style="{DynamicResource CheckBoxGambits}" />
                                                                                                </StackPanel>
                                                                                                <StackPanel>
                                                                                                    <CheckBox Margin="3,3" Content="BLACK MAGE" IsChecked="{Binding IsBlm, Mode=TwoWay}" Style="{DynamicResource CheckBoxGambits}" />
                                                                                                    <CheckBox Margin="3,0,0,0" Content="SUMMONER" IsChecked="{Binding IsSmn, Mode=TwoWay}" Style="{DynamicResource CheckBoxGambits}" />
                                                                                                    <CheckBox Margin="3,3" Content="RED MAGE" IsChecked="{Binding IsRdm, Mode=TwoWay}" Style="{DynamicResource CheckBoxGambits}" />
                                                                                                    <CheckBox Margin="3,0,0,0" Content="MONK" IsChecked="{Binding IsMnk, Mode=TwoWay}" Style="{DynamicResource CheckBoxGambits}" />
                                                                                                    <CheckBox Margin="3,3" Content="DRAGOON" IsChecked="{Binding IsDrg, Mode=TwoWay}" Style="{DynamicResource CheckBoxGambits}" />
                                                                                                    <CheckBox Margin="3,0,0,0" Content="SAMURAI" IsChecked="{Binding IsSam, Mode=TwoWay}" Style="{DynamicResource CheckBoxGambits}" />
                                                                                                    <CheckBox Margin="3,3" Content="NINJA" IsChecked="{Binding IsNin, Mode=TwoWay}" Style="{DynamicResource CheckBoxGambits}" />
                                                                                                </StackPanel>
                                                                                            </StackPanel>
                                                                                            <Button Margin="0,3,0,0" HorizontalAlignment="Right" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.RemoveGambitCondition}" Content="REMOVE CONDITION" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                                <Button.CommandParameter>
                                                                                                    <MultiBinding Converter="{StaticResource ConditionConverter}">
                                                                                                        <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}, AncestorLevel=2}" />
                                                                                                        <Binding Path="Id" />
                                                                                                    </MultiBinding>
                                                                                                </Button.CommandParameter>
                                                                                            </Button>
                                                                                        </StackPanel>
                                                                                    </ComboBox>
                                                                                </DataTemplate>

                                                                                <DataTemplate DataType="{x:Type conditions:IsRoleCondition}">
                                                                                    <ComboBox Margin="3,0,0,0" Background="{DynamicResource Success}" Style="{DynamicResource ComboBoxGambitCondition}" Tag="IS ROLE">
                                                                                        <StackPanel Width="150">
                                                                                            <CheckBox Margin="3,0,0,0" Content="IS TANK" IsChecked="{Binding IsTank, Mode=TwoWay}" Style="{DynamicResource CheckBoxGambits}" />
                                                                                            <CheckBox Margin="3,3" Content="IS HEALER" IsChecked="{Binding IsHealer, Mode=TwoWay}" Style="{DynamicResource CheckBoxGambits}" />
                                                                                            <CheckBox Margin="3,0,0,0" Content="IS DPS" IsChecked="{Binding IsDps, Mode=TwoWay}" Style="{DynamicResource CheckBoxGambits}" />
                                                                                            <Button Margin="0,3,0,0" HorizontalAlignment="Right" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.RemoveGambitCondition}" Content="REMOVE CONDITION" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                                <Button.CommandParameter>
                                                                                                    <MultiBinding Converter="{StaticResource ConditionConverter}">
                                                                                                        <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}, AncestorLevel=2}" />
                                                                                                        <Binding Path="Id" />
                                                                                                    </MultiBinding>
                                                                                                </Button.CommandParameter>
                                                                                            </Button>
                                                                                        </StackPanel>
                                                                                    </ComboBox>
                                                                                </DataTemplate>

                                                                                <DataTemplate DataType="{x:Type conditions:EnemiesNearbyCondition}">
                                                                                    <ComboBox Margin="3,0,0,0" Background="{DynamicResource Success}" Style="{DynamicResource ComboBoxGambitCondition}" Tag="ENEMIES NEARBY">
                                                                                        <StackPanel Width="200">
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="Enemy Count:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="{Binding Count, Mode=TwoWay}" />

                                                                                            <TextBox Margin="0,3,0,0"
                                                                                                     CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="Within Range Of Target (Yalms):"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="{Binding Range, Mode=TwoWay}" />

                                                                                            <StackPanel Margin="0,4,0,0" Orientation="Horizontal">
                                                                                                <RadioButton Content="By Player" GroupName="EnemiesNearby" IsChecked="{Binding ByTargetObject, Mode=TwoWay}" Style="{DynamicResource RadioButtonGambitCondition}" />
                                                                                                <RadioButton Margin="4,0,0,0" Content="By Target Object" GroupName="EnemiesNearby" IsChecked="{Binding ByPlayer, Mode=TwoWay}" Style="{DynamicResource RadioButtonGambitCondition}" />
                                                                                            </StackPanel>

                                                                                            <Button Margin="0,3,0,0" HorizontalAlignment="Right" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.RemoveGambitCondition}" Content="REMOVE CONDITION" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                                <Button.CommandParameter>
                                                                                                    <MultiBinding Converter="{StaticResource ConditionConverter}">
                                                                                                        <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}, AncestorLevel=2}" />
                                                                                                        <Binding Path="Id" />
                                                                                                    </MultiBinding>
                                                                                                </Button.CommandParameter>
                                                                                            </Button>
                                                                                        </StackPanel>
                                                                                    </ComboBox>
                                                                                </DataTemplate>

                                                                                <DataTemplate DataType="{x:Type conditions:TargetIsBossCondition}">
                                                                                    <ComboBox Margin="3,0,0,0" Background="{DynamicResource Success}" Style="{DynamicResource ComboBoxGambitCondition}" Tag="TARGET BOSS">
                                                                                        <StackPanel Width="200">

                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="CURRENT TARGET IS BOSS:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="True" />

                                                                                            <Button Margin="0,3,0,0" HorizontalAlignment="Right" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.RemoveGambitCondition}" Content="REMOVE CONDITION" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                                <Button.CommandParameter>
                                                                                                    <MultiBinding Converter="{StaticResource ConditionConverter}">
                                                                                                        <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}, AncestorLevel=2}" />
                                                                                                        <Binding Path="Id" />
                                                                                                    </MultiBinding>
                                                                                                </Button.CommandParameter>
                                                                                            </Button>
                                                                                        </StackPanel>
                                                                                    </ComboBox>
                                                                                </DataTemplate>

                                                                                <DataTemplate DataType="{x:Type conditions:MonkGreasedLightningCondition}">
                                                                                    <ComboBox Margin="3,0,0,0" Background="{DynamicResource Success}" Style="{DynamicResource ComboBoxGambitCondition}" Tag="GREASED LIGHTNING">
                                                                                        <StackPanel Width="200">
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="MINIMUM GREASED LIGHTNING:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="{Binding GreasedLightningMinimum, Mode=TwoWay}" />
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="MAXIMUM GREASED LIGHTNING:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="{Binding GreasedLightningMaximum, Mode=TwoWay}" />

                                                                                            <Button Margin="0,3,0,0" HorizontalAlignment="Right" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.RemoveGambitCondition}" Content="REMOVE CONDITION" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                                <Button.CommandParameter>
                                                                                                    <MultiBinding Converter="{StaticResource ConditionConverter}">
                                                                                                        <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}, AncestorLevel=2}" />
                                                                                                        <Binding Path="Id" />
                                                                                                    </MultiBinding>
                                                                                                </Button.CommandParameter>
                                                                                            </Button>
                                                                                        </StackPanel>
                                                                                    </ComboBox>
                                                                                </DataTemplate>


                                                                                <DataTemplate DataType="{x:Type conditions:MonkChakraCondition}">
                                                                                    <ComboBox Margin="3,0,0,0" Background="{DynamicResource Success}" Style="{DynamicResource ComboBoxGambitCondition}" Tag="CHAKRA">
                                                                                        <StackPanel Width="200">
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="MINIMUM CHAKRA:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="{Binding ChakraMinimum, Mode=TwoWay}" />
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="MAXIMUM CHAKRA:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="{Binding ChakraMaximum, Mode=TwoWay}" />

                                                                                            <Button Margin="0,3,0,0" HorizontalAlignment="Right" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.RemoveGambitCondition}" Content="REMOVE CONDITION" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                                <Button.CommandParameter>
                                                                                                    <MultiBinding Converter="{StaticResource ConditionConverter}">
                                                                                                        <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}, AncestorLevel=2}" />
                                                                                                        <Binding Path="Id" />
                                                                                                    </MultiBinding>
                                                                                                </Button.CommandParameter>
                                                                                            </Button>
                                                                                        </StackPanel>
                                                                                    </ComboBox>
                                                                                </DataTemplate>

                                                                                <DataTemplate DataType="{x:Type conditions:BardRepertoireCondition}">
                                                                                    <ComboBox Margin="3,0,0,0" Background="{DynamicResource Success}" Style="{DynamicResource ComboBoxGambitCondition}" Tag="REPERTOIRE">
                                                                                        <StackPanel Width="200">
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="MINIMUM REPERTOIRE:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="{Binding RepertoireMinimum, Mode=TwoWay}" />
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="MAXIMUM REPERTOIRE:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="{Binding RepertoireMaximum, Mode=TwoWay}" />

                                                                                            <Button Margin="0,3,0,0" HorizontalAlignment="Right" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.RemoveGambitCondition}" Content="REMOVE CONDITION" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                                <Button.CommandParameter>
                                                                                                    <MultiBinding Converter="{StaticResource ConditionConverter}">
                                                                                                        <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}, AncestorLevel=2}" />
                                                                                                        <Binding Path="Id" />
                                                                                                    </MultiBinding>
                                                                                                </Button.CommandParameter>
                                                                                            </Button>
                                                                                        </StackPanel>
                                                                                    </ComboBox>
                                                                                </DataTemplate>

                                                                                <DataTemplate DataType="{x:Type conditions:MachinistHeatCondition}">
                                                                                    <ComboBox Margin="3,0,0,0" Background="{DynamicResource Success}" Style="{DynamicResource ComboBoxGambitCondition}" Tag="HEAT">
                                                                                        <StackPanel Width="200">
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="MINIMUM HEAT:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="{Binding HeatMinimum, Mode=TwoWay}" />
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="MAXIMUM HEAT:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="{Binding HeatMaximum, Mode=TwoWay}" />

                                                                                            <Button Margin="0,3,0,0" HorizontalAlignment="Right" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.RemoveGambitCondition}" Content="REMOVE CONDITION" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                                <Button.CommandParameter>
                                                                                                    <MultiBinding Converter="{StaticResource ConditionConverter}">
                                                                                                        <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}, AncestorLevel=2}" />
                                                                                                        <Binding Path="Id" />
                                                                                                    </MultiBinding>
                                                                                                </Button.CommandParameter>
                                                                                            </Button>
                                                                                        </StackPanel>
                                                                                    </ComboBox>
                                                                                </DataTemplate>

                                                                                <DataTemplate DataType="{x:Type conditions:DragoonGazeCondition}">
                                                                                    <ComboBox Margin="3,0,0,0" Background="{DynamicResource Success}" Style="{DynamicResource ComboBoxGambitCondition}" Tag="GAZE">
                                                                                        <StackPanel Width="200">
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="MINIMUM GAZE:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="{Binding GazeMinimum, Mode=TwoWay}" />
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="MAXIMUM GAZE:"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="{Binding GazeMaximum, Mode=TwoWay}" />

                                                                                            <Button Margin="0,3,0,0" HorizontalAlignment="Right" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.RemoveGambitCondition}" Content="REMOVE CONDITION" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                                <Button.CommandParameter>
                                                                                                    <MultiBinding Converter="{StaticResource ConditionConverter}">
                                                                                                        <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}, AncestorLevel=2}" />
                                                                                                        <Binding Path="Id" />
                                                                                                    </MultiBinding>
                                                                                                </Button.CommandParameter>
                                                                                            </Button>
                                                                                        </StackPanel>
                                                                                    </ComboBox>
                                                                                </DataTemplate>

                                                                                <DataTemplate DataType="{x:Type conditions:DragoonGaugeTimerCondition}">
                                                                                    <ComboBox Margin="3,0,0,0" Background="{DynamicResource Success}" Style="{DynamicResource ComboBoxGambitCondition}" Tag="DRAGOON GAUGE">
                                                                                        <StackPanel Width="200">
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="MINIMUM TIME LEFT (SECONDS):"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="{Binding GaugeMinimum, Mode=TwoWay}" />
                                                                                            <TextBox CaretBrush="White"
                                                                                                     FontSize="10"
                                                                                                     Foreground="{DynamicResource Light}"
                                                                                                     Tag="MAXIMUM TIME LEFT (SECONDS):"
                                                                                                     Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                                     Text="{Binding GaugeMaximum, Mode=TwoWay}" />

                                                                                            <Button Margin="0,3,0,0" HorizontalAlignment="Right" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.RemoveGambitCondition}" Content="REMOVE CONDITION" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                                <Button.CommandParameter>
                                                                                                    <MultiBinding Converter="{StaticResource ConditionConverter}">
                                                                                                        <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}, AncestorLevel=2}" />
                                                                                                        <Binding Path="Id" />
                                                                                                    </MultiBinding>
                                                                                                </Button.CommandParameter>
                                                                                            </Button>
                                                                                        </StackPanel>
                                                                                    </ComboBox>
                                                                                </DataTemplate>

                                                                            </ItemsControl.Resources>
                                                                        </ItemsControl>

                                                                        <!--  Gambit Add Conditions Button  -->
                                                                        <ComboBox Grid.Row="1" Grid.Column="4" Margin="3,0,0,0" HorizontalAlignment="Left" Style="{DynamicResource ComboBoxGambitAddCondition}">
                                                                            <StackPanel>
                                                                                <StackPanel Margin="3" Orientation="Horizontal">
                                                                                    <StackPanel>

                                                                                        <Button Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.AddGambitCondition}" Content="IN INSTANCE" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                            <Button.Resources>
                                                                                                <sys:String x:Key="Condition">InInstance</sys:String>
                                                                                            </Button.Resources>
                                                                                            <Button.CommandParameter>
                                                                                                <MultiBinding Converter="{StaticResource ConditionAddConverter}">
                                                                                                    <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}}" />
                                                                                                    <Binding Source="{StaticResource Condition}" />
                                                                                                </MultiBinding>
                                                                                            </Button.CommandParameter>
                                                                                        </Button>

                                                                                        <Button Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.AddGambitCondition}" Content="NOT IN INSTANCE" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                            <Button.Resources>
                                                                                                <sys:String x:Key="Condition">NotInInstance</sys:String>
                                                                                            </Button.Resources>
                                                                                            <Button.CommandParameter>
                                                                                                <MultiBinding Converter="{StaticResource ConditionAddConverter}">
                                                                                                    <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}}" />
                                                                                                    <Binding Source="{StaticResource Condition}" />
                                                                                                </MultiBinding>
                                                                                            </Button.CommandParameter>
                                                                                        </Button>

                                                                                        <Button Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.AddGambitCondition}" Content="IS JOB" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                            <Button.Resources>
                                                                                                <sys:String x:Key="Condition">IsJob</sys:String>
                                                                                            </Button.Resources>
                                                                                            <Button.CommandParameter>
                                                                                                <MultiBinding Converter="{StaticResource ConditionAddConverter}">
                                                                                                    <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}}" />
                                                                                                    <Binding Source="{StaticResource Condition}" />
                                                                                                </MultiBinding>
                                                                                            </Button.CommandParameter>
                                                                                        </Button>

                                                                                        <Button Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.AddGambitCondition}" Content="IS ROLE" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                            <Button.Resources>
                                                                                                <sys:String x:Key="Condition">IsRole</sys:String>
                                                                                            </Button.Resources>
                                                                                            <Button.CommandParameter>
                                                                                                <MultiBinding Converter="{StaticResource ConditionAddConverter}">
                                                                                                    <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}}" />
                                                                                                    <Binding Source="{StaticResource Condition}" />
                                                                                                </MultiBinding>
                                                                                            </Button.CommandParameter>
                                                                                        </Button>

                                                                                        <Button Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.AddGambitCondition}" Content="PLAYER IN COMBAT" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                            <Button.Resources>
                                                                                                <sys:String x:Key="Condition">PlayerInCombat</sys:String>
                                                                                            </Button.Resources>
                                                                                            <Button.CommandParameter>
                                                                                                <MultiBinding Converter="{StaticResource ConditionAddConverter}">
                                                                                                    <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}}" />
                                                                                                    <Binding Source="{StaticResource Condition}" />
                                                                                                </MultiBinding>
                                                                                            </Button.CommandParameter>
                                                                                        </Button>


                                                                                        <Button Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.AddGambitCondition}" Content="PLAYER NOT IN COMBAT" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                            <Button.Resources>
                                                                                                <sys:String x:Key="Condition">PlayerNotInCombat</sys:String>
                                                                                            </Button.Resources>
                                                                                            <Button.CommandParameter>
                                                                                                <MultiBinding Converter="{StaticResource ConditionAddConverter}">
                                                                                                    <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}}" />
                                                                                                    <Binding Source="{StaticResource Condition}" />
                                                                                                </MultiBinding>
                                                                                            </Button.CommandParameter>
                                                                                        </Button>

                                                                                        <Button Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.AddGambitCondition}" Content="COMBAT TIME" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                            <Button.Resources>
                                                                                                <sys:String x:Key="Condition">CombatTime</sys:String>
                                                                                            </Button.Resources>
                                                                                            <Button.CommandParameter>
                                                                                                <MultiBinding Converter="{StaticResource ConditionAddConverter}">
                                                                                                    <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}}" />
                                                                                                    <Binding Source="{StaticResource Condition}" />
                                                                                                </MultiBinding>
                                                                                            </Button.CommandParameter>
                                                                                        </Button>

                                                                                    </StackPanel>

                                                                                    <StackPanel Margin="5,0">

                                                                                        <Button Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.AddGambitCondition}" Content="LAST SPELL" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                            <Button.Resources>
                                                                                                <sys:String x:Key="Condition">LastSpell</sys:String>
                                                                                            </Button.Resources>
                                                                                            <Button.CommandParameter>
                                                                                                <MultiBinding Converter="{StaticResource ConditionAddConverter}">
                                                                                                    <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}}" />
                                                                                                    <Binding Source="{StaticResource Condition}" />
                                                                                                </MultiBinding>
                                                                                            </Button.CommandParameter>
                                                                                        </Button>

                                                                                        <Button Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.AddGambitCondition}" Content="TARGET NAME" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                            <Button.Resources>
                                                                                                <sys:String x:Key="Condition">TargetName</sys:String>
                                                                                            </Button.Resources>
                                                                                            <Button.CommandParameter>
                                                                                                <MultiBinding Converter="{StaticResource ConditionAddConverter}">
                                                                                                    <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}}" />
                                                                                                    <Binding Source="{StaticResource Condition}" />
                                                                                                </MultiBinding>
                                                                                            </Button.CommandParameter>
                                                                                        </Button>

                                                                                        <Button Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.AddGambitCondition}" Content="TARGET BOSS" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                            <Button.Resources>
                                                                                                <sys:String x:Key="Condition">TargetIsBoss</sys:String>
                                                                                            </Button.Resources>
                                                                                            <Button.CommandParameter>
                                                                                                <MultiBinding Converter="{StaticResource ConditionAddConverter}">
                                                                                                    <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}}" />
                                                                                                    <Binding Source="{StaticResource Condition}" />
                                                                                                </MultiBinding>
                                                                                            </Button.CommandParameter>
                                                                                        </Button>

                                                                                        <Button Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.AddGambitCondition}" Content="ENEMY CASTING SPELL" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                            <Button.Resources>
                                                                                                <sys:String x:Key="Condition">EnemyCastingSpell</sys:String>
                                                                                            </Button.Resources>
                                                                                            <Button.CommandParameter>
                                                                                                <MultiBinding Converter="{StaticResource ConditionAddConverter}">
                                                                                                    <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}}" />
                                                                                                    <Binding Source="{StaticResource Condition}" />
                                                                                                </MultiBinding>
                                                                                            </Button.CommandParameter>
                                                                                        </Button>

                                                                                        <Button Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.AddGambitCondition}" Content="ENEMIES NEARBY" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                            <Button.Resources>
                                                                                                <sys:String x:Key="Condition">EnemiesNearby</sys:String>
                                                                                            </Button.Resources>
                                                                                            <Button.CommandParameter>
                                                                                                <MultiBinding Converter="{StaticResource ConditionAddConverter}">
                                                                                                    <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}}" />
                                                                                                    <Binding Source="{StaticResource Condition}" />
                                                                                                </MultiBinding>
                                                                                            </Button.CommandParameter>
                                                                                        </Button>

                                                                                        <Button Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.AddGambitCondition}" Content="HAS AURA" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                            <Button.Resources>
                                                                                                <sys:String x:Key="Condition">HasAura</sys:String>
                                                                                            </Button.Resources>
                                                                                            <Button.CommandParameter>
                                                                                                <MultiBinding Converter="{StaticResource ConditionAddConverter}">
                                                                                                    <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}}" />
                                                                                                    <Binding Source="{StaticResource Condition}" />
                                                                                                </MultiBinding>
                                                                                            </Button.CommandParameter>
                                                                                        </Button>

                                                                                        <Button Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.AddGambitCondition}" Content="DOES NOT HAVE AURA" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                            <Button.Resources>
                                                                                                <sys:String x:Key="Condition">DoesNotHaveAura</sys:String>
                                                                                            </Button.Resources>
                                                                                            <Button.CommandParameter>
                                                                                                <MultiBinding Converter="{StaticResource ConditionAddConverter}">
                                                                                                    <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}}" />
                                                                                                    <Binding Source="{StaticResource Condition}" />
                                                                                                </MultiBinding>
                                                                                            </Button.CommandParameter>
                                                                                        </Button>
                                                                                        
                                                                                    </StackPanel>

                                                                                    <StackPanel Margin="5,0">

                                                                                        <Button Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.AddGambitCondition}" Content="SPELL OFF COOLDOWN" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                            <Button.Resources>
                                                                                                <sys:String x:Key="Condition">SpellOffCooldown</sys:String>
                                                                                            </Button.Resources>
                                                                                            <Button.CommandParameter>
                                                                                                <MultiBinding Converter="{StaticResource ConditionAddConverter}">
                                                                                                    <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}}" />
                                                                                                    <Binding Source="{StaticResource Condition}" />
                                                                                                </MultiBinding>
                                                                                            </Button.CommandParameter>
                                                                                        </Button>

                                                                                        <Button Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.AddGambitCondition}" Content="HEALTH PERCENT BELOW" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                            <Button.Resources>
                                                                                                <sys:String x:Key="Condition">HpPercentBelow</sys:String>
                                                                                            </Button.Resources>
                                                                                            <Button.CommandParameter>
                                                                                                <MultiBinding Converter="{StaticResource ConditionAddConverter}">
                                                                                                    <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}}" />
                                                                                                    <Binding Source="{StaticResource Condition}" />
                                                                                                </MultiBinding>
                                                                                            </Button.CommandParameter>
                                                                                        </Button>

                                                                                        <Button Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.AddGambitCondition}" Content="HEALTH PERCENT BETWEEN" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                            <Button.Resources>
                                                                                                <sys:String x:Key="Condition">HpPercentBetween</sys:String>
                                                                                            </Button.Resources>
                                                                                            <Button.CommandParameter>
                                                                                                <MultiBinding Converter="{StaticResource ConditionAddConverter}">
                                                                                                    <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}}" />
                                                                                                    <Binding Source="{StaticResource Condition}" />
                                                                                                </MultiBinding>
                                                                                            </Button.CommandParameter>
                                                                                        </Button>

                                                                                        <Button Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.AddGambitCondition}" Content="MP PERCENT" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                            <Button.Resources>
                                                                                                <sys:String x:Key="Condition">MpPercent</sys:String>
                                                                                            </Button.Resources>
                                                                                            <Button.CommandParameter>
                                                                                                <MultiBinding Converter="{StaticResource ConditionAddConverter}">
                                                                                                    <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}}" />
                                                                                                    <Binding Source="{StaticResource Condition}" />
                                                                                                </MultiBinding>
                                                                                            </Button.CommandParameter>
                                                                                        </Button>

                                                                                        <Button Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.AddGambitCondition}" Content="PLAYER HAS AURA" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                            <Button.Resources>
                                                                                                <sys:String x:Key="Condition">PlayerHasAura</sys:String>
                                                                                            </Button.Resources>
                                                                                            <Button.CommandParameter>
                                                                                                <MultiBinding Converter="{StaticResource ConditionAddConverter}">
                                                                                                    <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}}" />
                                                                                                    <Binding Source="{StaticResource Condition}" />
                                                                                                </MultiBinding>
                                                                                            </Button.CommandParameter>
                                                                                        </Button>

                                                                                        <Button Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.AddGambitCondition}" Content="PLAYER DOES NOT HAVE AURA" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                            <Button.Resources>
                                                                                                <sys:String x:Key="Condition">PlayerDoesNotHaveAura</sys:String>
                                                                                            </Button.Resources>
                                                                                            <Button.CommandParameter>
                                                                                                <MultiBinding Converter="{StaticResource ConditionAddConverter}">
                                                                                                    <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}}" />
                                                                                                    <Binding Source="{StaticResource Condition}" />
                                                                                                </MultiBinding>
                                                                                            </Button.CommandParameter>
                                                                                        </Button>

                                                                                        <Button Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.AddGambitCondition}" Content="HAS PET" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                            <Button.Resources>
                                                                                                <sys:String x:Key="Condition">HasPet</sys:String>
                                                                                            </Button.Resources>
                                                                                            <Button.CommandParameter>
                                                                                                <MultiBinding Converter="{StaticResource ConditionAddConverter}">
                                                                                                    <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}}" />
                                                                                                    <Binding Source="{StaticResource Condition}" />
                                                                                                </MultiBinding>
                                                                                            </Button.CommandParameter>
                                                                                        </Button>

                                                                                    </StackPanel>

                                                                                    <!--  Monk  -->
                                                                                    <StackPanel Margin="5,0">
                                                                                        <StackPanel.Style>
                                                                                            <Style TargetType="StackPanel">
                                                                                                <Setter Property="Visibility" Value="Collapsed" />
                                                                                                <Style.Triggers>
                                                                                                    <DataTrigger Binding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.SelectedJob}" Value="{x:Static enums:ClassJobType.Monk}">
                                                                                                        <Setter Property="Visibility" Value="Visible" />
                                                                                                    </DataTrigger>
                                                                                                </Style.Triggers>
                                                                                            </Style>
                                                                                        </StackPanel.Style>

                                                                                        <Button Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.AddGambitCondition}" Content="CHAKRA" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                            <Button.Resources>
                                                                                                <sys:String x:Key="Condition">MonkChakra</sys:String>
                                                                                            </Button.Resources>
                                                                                            <Button.CommandParameter>
                                                                                                <MultiBinding Converter="{StaticResource ConditionAddConverter}">
                                                                                                    <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}}" />
                                                                                                    <Binding Source="{StaticResource Condition}" />
                                                                                                </MultiBinding>
                                                                                            </Button.CommandParameter>
                                                                                        </Button>

                                                                                        <Button Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.AddGambitCondition}" Content="GREASED LIGHTNING" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                            <Button.Resources>
                                                                                                <sys:String x:Key="Condition">MonkGreasedLightning</sys:String>
                                                                                            </Button.Resources>
                                                                                            <Button.CommandParameter>
                                                                                                <MultiBinding Converter="{StaticResource ConditionAddConverter}">
                                                                                                    <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}}" />
                                                                                                    <Binding Source="{StaticResource Condition}" />
                                                                                                </MultiBinding>
                                                                                            </Button.CommandParameter>
                                                                                        </Button>
                                                                                    </StackPanel>

                                                                                    <!--  Bard  -->
                                                                                    <StackPanel Margin="5,0">
                                                                                        <StackPanel.Style>
                                                                                            <Style TargetType="StackPanel">
                                                                                                <Setter Property="Visibility" Value="Collapsed" />
                                                                                                <Style.Triggers>
                                                                                                    <DataTrigger Binding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.SelectedJob}" Value="{x:Static enums:ClassJobType.Bard}">
                                                                                                        <Setter Property="Visibility" Value="Visible" />
                                                                                                    </DataTrigger>
                                                                                                </Style.Triggers>
                                                                                            </Style>
                                                                                        </StackPanel.Style>

                                                                                        <Button Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.AddGambitCondition}" Content="REPERTOIRE" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                            <Button.Resources>
                                                                                                <sys:String x:Key="Condition">BardRepertoire</sys:String>
                                                                                            </Button.Resources>
                                                                                            <Button.CommandParameter>
                                                                                                <MultiBinding Converter="{StaticResource ConditionAddConverter}">
                                                                                                    <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}}" />
                                                                                                    <Binding Source="{StaticResource Condition}" />
                                                                                                </MultiBinding>
                                                                                            </Button.CommandParameter>
                                                                                        </Button>
                                                                                    </StackPanel>

                                                                                    <!--  Machinist  -->
                                                                                    <StackPanel Margin="5,0">
                                                                                        <StackPanel.Style>
                                                                                            <Style TargetType="StackPanel">
                                                                                                <Setter Property="Visibility" Value="Collapsed" />
                                                                                                <Style.Triggers>
                                                                                                    <DataTrigger Binding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.SelectedJob}" Value="{x:Static enums:ClassJobType.Machinist}">
                                                                                                        <Setter Property="Visibility" Value="Visible" />
                                                                                                    </DataTrigger>
                                                                                                </Style.Triggers>
                                                                                            </Style>
                                                                                        </StackPanel.Style>


                                                                                        <Button Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.AddGambitCondition}" Content="HEAT" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                            <Button.Resources>
                                                                                                <sys:String x:Key="Condition">MachinistHeat</sys:String>
                                                                                            </Button.Resources>
                                                                                            <Button.CommandParameter>
                                                                                                <MultiBinding Converter="{StaticResource ConditionAddConverter}">
                                                                                                    <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}}" />
                                                                                                    <Binding Source="{StaticResource Condition}" />
                                                                                                </MultiBinding>
                                                                                            </Button.CommandParameter>
                                                                                        </Button>

                                                                                        <Button Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.AddGambitCondition}" Content="AMMO" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                            <Button.Resources>
                                                                                                <sys:String x:Key="Condition">MachinistAmmo</sys:String>
                                                                                            </Button.Resources>
                                                                                            <Button.CommandParameter>
                                                                                                <MultiBinding Converter="{StaticResource ConditionAddConverter}">
                                                                                                    <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}}" />
                                                                                                    <Binding Source="{StaticResource Condition}" />
                                                                                                </MultiBinding>
                                                                                            </Button.CommandParameter>
                                                                                        </Button>
                                                                                    </StackPanel>

                                                                                    <!--  Dragoon  -->
                                                                                    <StackPanel Margin="5,0">
                                                                                        <StackPanel.Style>
                                                                                            <Style TargetType="StackPanel">
                                                                                                <Setter Property="Visibility" Value="Collapsed" />
                                                                                                <Style.Triggers>
                                                                                                    <DataTrigger Binding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.SelectedJob}" Value="{x:Static enums:ClassJobType.Dragoon}">
                                                                                                        <Setter Property="Visibility" Value="Visible" />
                                                                                                    </DataTrigger>
                                                                                                </Style.Triggers>
                                                                                            </Style>
                                                                                        </StackPanel.Style>


                                                                                        <Button Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.AddGambitCondition}" Content="GAZE" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                            <Button.Resources>
                                                                                                <sys:String x:Key="Condition">DragoonGaze</sys:String>
                                                                                            </Button.Resources>
                                                                                            <Button.CommandParameter>
                                                                                                <MultiBinding Converter="{StaticResource ConditionAddConverter}">
                                                                                                    <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}}" />
                                                                                                    <Binding Source="{StaticResource Condition}" />
                                                                                                </MultiBinding>
                                                                                            </Button.CommandParameter>
                                                                                        </Button>

                                                                                        <Button Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.AddGambitCondition}" Content="DRAGOON GAUGE" Style="{DynamicResource ButtonGambitAddCondition}">
                                                                                            <Button.Resources>
                                                                                                <sys:String x:Key="Condition">DragoonGaugeTimer</sys:String>
                                                                                            </Button.Resources>
                                                                                            <Button.CommandParameter>
                                                                                                <MultiBinding Converter="{StaticResource ConditionAddConverter}">
                                                                                                    <Binding Path="DataContext" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}}" />
                                                                                                    <Binding Source="{StaticResource Condition}" />
                                                                                                </MultiBinding>
                                                                                            </Button.CommandParameter>
                                                                                        </Button>
                                                                                    </StackPanel>

                                                                                </StackPanel>
                                                                            </StackPanel>
                                                                        </ComboBox>

                                                                        <!--  Gambit Chain Settings Button  -->
                                                                        <ComboBox Grid.Row="1" Grid.Column="5" Margin="3,0,0,0" HorizontalAlignment="Right">
                                                                            <ComboBox.Style>
                                                                                <Style TargetType="{x:Type ComboBox}">
                                                                                    <Setter Property="SnapsToDevicePixels" Value="True" />
                                                                                    <Setter Property="OverridesDefaultStyle" Value="True" />
                                                                                    <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto" />
                                                                                    <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto" />
                                                                                    <Setter Property="ScrollViewer.CanContentScroll" Value="True" />
                                                                                    <Setter Property="TextElement.FontWeight" Value="SemiBold" />
                                                                                    <Setter Property="TextElement.Foreground" Value="{DynamicResource MainForeground}" />
                                                                                    <Setter Property="FocusVisualStyle" Value="{x:Null}" />
                                                                                    <Setter Property="Template">
                                                                                        <Setter.Value>
                                                                                            <ControlTemplate TargetType="ComboBox">
                                                                                                <Border Name="Background"
                                                                                                        Width="20"
                                                                                                        Height="20"
                                                                                                        Background="{DynamicResource AccentDarker}"
                                                                                                        CornerRadius="5"
                                                                                                        IsHitTestVisible="True">
                                                                                                    <Grid>

                                                                                                        <CheckBox Name="ToggleButton" ClickMode="Press" Focusable="False" IsChecked="{Binding Path=IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" Template="{DynamicResource ComboBoxGambitActionToggleButton}" />

                                                                                                        <Path Width="12"
                                                                                                              HorizontalAlignment="Center"
                                                                                                              VerticalAlignment="Center"
                                                                                                              Data="M10.519881,14.945064C11.300896,14.955074,12.079896,15.102078,12.819896,15.386075L10.878893,17.326085C9.6458764,17.201085,8.3688531,17.591071,7.4258485,18.533091L3.5977991,22.360102C1.9327704,24.026093 1.9317786,26.736124 3.5977991,28.402117 5.2638197,30.068108 7.9748359,30.068108 9.6398644,28.402117L13.467914,24.575106C14.410919,23.632109,14.800938,22.355097,14.675937,21.121083L16.615963,19.180096C17.523962,21.546103,17.034943,24.325104,15.126931,26.234108L11.298882,30.061119C8.7138591,32.64612 4.5238051,32.64612 1.9387672,30.062127 -0.64625573,27.477126 -0.64625573,23.287106 1.9387672,20.701098L5.7668166,16.875065C7.077837,15.564055,8.8018727,14.923061,10.519881,14.945064z M19.825993,10.418039L21.580012,12.17305 12.089907,21.665091 10.333873,19.911087z M25.383069,0C27.077088,3.0538786E-08 28.771109,0.64599859 30.063117,1.9390028 32.647133,4.5230274 32.647133,8.7120385 30.062109,11.298047L26.235068,15.125058C24.327055,17.033085,21.547022,17.52207,19.181973,16.614077L21.121998,14.674067C22.356022,14.799068,23.633046,14.409051,24.57605,13.466054L28.403094,9.6400513C30.068121,7.9740295 30.069129,5.2630205 28.403094,3.5980362 26.738064,1.9320143 24.027033,1.9320143 22.362034,3.5980362L18.533986,7.4240398C17.591958,8.3670363,17.201968,9.643042,17.32697,10.877056L15.385937,12.817066C14.478913,10.452035,14.968939,7.6730337,16.875945,5.7660436L20.703019,1.9390028C21.995026,0.64599859,23.689047,3.0538786E-08,25.383069,0z"
                                                                                                              Fill="White"
                                                                                                              IsHitTestVisible="False"
                                                                                                              Stretch="Uniform" />

                                                                                                        <Popup Name="Popup"
                                                                                                               AllowsTransparency="True"
                                                                                                               Focusable="False"
                                                                                                               IsOpen="{TemplateBinding ComboBox.IsDropDownOpen}"
                                                                                                               Placement="Bottom"
                                                                                                               PopupAnimation="Slide"
                                                                                                               VerticalOffset="5">

                                                                                                            <Grid Name="DropDown" MinWidth="{TemplateBinding FrameworkElement.ActualWidth}" MaxHeight="{TemplateBinding ComboBox.MaxDropDownHeight}" SnapsToDevicePixels="True">
                                                                                                                <Border Name="DropDownBorder" Background="{DynamicResource AccentLighter}" CornerRadius="7" />

                                                                                                                <ScrollViewer Margin="4" SnapsToDevicePixels="True">
                                                                                                                    <ItemsPresenter KeyboardNavigation.DirectionalNavigation="Contained" />
                                                                                                                </ScrollViewer>
                                                                                                            </Grid>
                                                                                                        </Popup>

                                                                                                    </Grid>
                                                                                                </Border>
                                                                                                <ControlTemplate.Triggers>
                                                                                                    <Trigger Property="Tag" Value="Yes">
                                                                                                        <Setter TargetName="Background" Property="Background" Value="{DynamicResource Info}" />
                                                                                                    </Trigger>
                                                                                                    <Trigger Property="ItemsControl.HasItems" Value="False">
                                                                                                        <Setter TargetName="DropDownBorder" Property="FrameworkElement.MinHeight" Value="95" />
                                                                                                    </Trigger>
                                                                                                    <Trigger Property="UIElement.IsEnabled" Value="False">
                                                                                                        <Setter Property="TextElement.Foreground" Value="Gray" />
                                                                                                    </Trigger>
                                                                                                    <Trigger Property="IsDropDownOpen" Value="True">
                                                                                                        <Setter TargetName="Background" Property="Background" Value="{DynamicResource Info}" />
                                                                                                    </Trigger>
                                                                                                    <Trigger Property="ItemsControl.IsGrouping" Value="True">
                                                                                                        <Setter Property="ScrollViewer.CanContentScroll" Value="False" />
                                                                                                    </Trigger>
                                                                                                    <Trigger Property="ComboBox.IsEditable" Value="True">
                                                                                                        <Setter Property="KeyboardNavigation.IsTabStop" Value="False" />
                                                                                                    </Trigger>
                                                                                                </ControlTemplate.Triggers>
                                                                                            </ControlTemplate>
                                                                                        </Setter.Value>
                                                                                    </Setter>

                                                                                    <Style.Triggers>
                                                                                        <DataTrigger Binding="{Binding HasChain}" Value="True">
                                                                                            <Setter Property="Tag" Value="Yes" />
                                                                                        </DataTrigger>
                                                                                        <DataTrigger Binding="{Binding OnlyUseInChain}" Value="True">
                                                                                            <Setter Property="Tag" Value="Yes" />
                                                                                        </DataTrigger>
                                                                                    </Style.Triggers>

                                                                                </Style>
                                                                            </ComboBox.Style>

                                                                            <StackPanel Margin="3">
                                                                                <CheckBox Margin="3" Content="HAS CHAIN" IsChecked="{Binding HasChain, Mode=TwoWay}" Style="{DynamicResource CheckBoxGambits}" />
                                                                                <TextBox CaretBrush="White"
                                                                                         FontSize="10"
                                                                                         Foreground="{DynamicResource Light}"
                                                                                         Tag="CHAIN TITLE:"
                                                                                         Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                         Text="{Binding ChainTitle, Mode=TwoWay}" />
                                                                                <CheckBox Margin="3" Content="ONLY USE IN CHAIN" IsChecked="{Binding OnlyUseInChain, Mode=TwoWay}" Style="{DynamicResource CheckBoxGambits}" />
                                                                                <CheckBox Margin="3" Content="FORCE CHAIN ACTIONS" IsChecked="{Binding ForceChainActions, Mode=TwoWay}" Style="{DynamicResource CheckBoxGambits}" />
                                                                                <TextBox CaretBrush="White"
                                                                                         FontSize="10"
                                                                                         Foreground="{DynamicResource Light}"
                                                                                         Tag="CHAIN MAX WAIT (MS):"
                                                                                         Template="{DynamicResource TextBoxTemplateGambitConditionTextBox}"
                                                                                         Text="{Binding ForceChainSleepMilliseconds, Mode=TwoWay}" />
                                                                            </StackPanel>
                                                                        </ComboBox>

                                                                        <!--  Gambit Extra Settings Button  -->
                                                                        <ComboBox Grid.Row="1" Grid.Column="6" Margin="3,0,0,0" HorizontalAlignment="Right" Style="{DynamicResource ComboBoxGambitAdditionalSettings}">
                                                                            <StackPanel Margin="3">

                                                                                <!--  Enable/Disable Gambit  -->
                                                                                <CheckBox HorizontalAlignment="Left" Content="GAMBIT ENABLED" IsChecked="{Binding IsEnabled, Mode=TwoWay}" Style="{DynamicResource CheckBoxGambits}" />

                                                                                <!--  Prioritize Gambit  -->
                                                                                <CheckBox Margin="0,3,0,0" HorizontalAlignment="Left" Content="ALLOW GAMBIT TO INTERRUPT" IsChecked="{Binding InterruptCast, Mode=TwoWay}" Style="{DynamicResource CheckBoxGambits}" />

                                                                                <!--  Copy Gambit  -->
                                                                                <Button HorizontalAlignment="Left" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.CopyGambit}" CommandParameter="{Binding}" Content="COPY GAMBIT" Style="{DynamicResource ButtonGambitAddCondition}" />

                                                                                <!--  Copy Gambit  -->
                                                                                <Button HorizontalAlignment="Left" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.CopyGambitToClipboard}" CommandParameter="{Binding}" Content="COPY GAMBIT TO CLIPBOARD" Style="{DynamicResource ButtonGambitAddCondition}" />

                                                                                <!--  Remove Gambit  -->
                                                                                <Button Margin="0,10,0,0"
                                                                                        HorizontalAlignment="Left"
                                                                                        Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.RemoveGambit}"
                                                                                        CommandParameter="{Binding}"
                                                                                        Content="DELETE GAMBIT"
                                                                                        Style="{DynamicResource ButtonGambitAddCondition}" />
                                                                            </StackPanel>
                                                                        </ComboBox>

                                                                    </Grid>
                                                                </DataTemplate>
                                                            </ItemsControl.ItemTemplate>
                                                        </ItemsControl>

                                                        <Rectangle Height="1" Margin="0,3,0,8" HorizontalAlignment="Stretch" Fill="DimGray" Opacity="0.05" />

                                                    </StackPanel>

                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="IsExpanded" Value="True">
                                                            <Setter TargetName="ExpanderContent" Property="Visibility" Value="Visible" />
                                                            <Setter TargetName="ExpanderContent" Property="Margin" Value="0,5,0,0" />
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>

                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </Expander.Style>
                            </Expander>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
        </StackPanel>
    </Border>
</UserControl>
